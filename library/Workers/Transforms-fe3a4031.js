define(["exports","./when-7ef6387a","./Check-ed6a1804","./Cartesian3-cb3509e0","./Ellipsoid-fc93f17d","./Matrix4-a5b26d08","./RuntimeError-5b606d78","./Cartesian2-7da3df11","./EnvironmentVariables-d40d9698"],(function(e,t,r,n,a,i,s,o,u){"use strict";function l(e){this._ellipsoid=t.defaultValue(e,a.Ellipsoid.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(l.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),l.prototype.project=function(e,r){var a=this._semimajorAxis,i=e.longitude*a,s=e.latitude*a,o=e.height;return t.defined(r)?(r.x=i,r.y=s,r.z=o,r):new n.Cartesian3(i,s,o)},l.prototype.unproject=function(e,r){var n=this._oneOverSemimajorAxis,i=e.x*n,s=e.y*n,o=e.z;return t.defined(r)?(r.longitude=i,r.latitude=s,r.height=o,r):new a.Cartographic(i,s,o)};var d=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function c(e,r){this.start=t.defaultValue(e,0),this.stop=t.defaultValue(r,0)}function f(e,r){this.center=n.Cartesian3.clone(t.defaultValue(e,n.Cartesian3.ZERO)),this.radius=t.defaultValue(r,0)}var h=new n.Cartesian3,p=new n.Cartesian3,m=new n.Cartesian3,y=new n.Cartesian3,C=new n.Cartesian3,v=new n.Cartesian3,w=new n.Cartesian3,g=new n.Cartesian3,x=new n.Cartesian3,_=new n.Cartesian3,E=new n.Cartesian3,S=new n.Cartesian3,O=4/3*n.CesiumMath.PI;f.fromPoints=function(e,r){if(t.defined(r)||(r=new f),!t.defined(e)||0===e.length)return r.center=n.Cartesian3.clone(n.Cartesian3.ZERO,r.center),r.radius=0,r;var a,i=n.Cartesian3.clone(e[0],w),s=n.Cartesian3.clone(i,h),o=n.Cartesian3.clone(i,p),u=n.Cartesian3.clone(i,m),l=n.Cartesian3.clone(i,y),d=n.Cartesian3.clone(i,C),c=n.Cartesian3.clone(i,v),O=e.length;for(a=1;a<O;a++){n.Cartesian3.clone(e[a],i);var R=i.x,M=i.y,T=i.z;R<s.x&&n.Cartesian3.clone(i,s),R>l.x&&n.Cartesian3.clone(i,l),M<o.y&&n.Cartesian3.clone(i,o),M>d.y&&n.Cartesian3.clone(i,d),T<u.z&&n.Cartesian3.clone(i,u),T>c.z&&n.Cartesian3.clone(i,c)}var q=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(l,s,g)),A=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(d,o,g)),b=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(c,u,g)),D=s,I=l,P=q;A>P&&(P=A,D=o,I=d),b>P&&(P=b,D=u,I=c);var U=x;U.x=.5*(D.x+I.x),U.y=.5*(D.y+I.y),U.z=.5*(D.z+I.z);var N=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(I,U,g)),z=Math.sqrt(N),F=_;F.x=s.x,F.y=o.y,F.z=u.z;var V=E;V.x=l.x,V.y=d.y,V.z=c.z;var B=n.Cartesian3.midpoint(F,V,S),L=0;for(a=0;a<O;a++){n.Cartesian3.clone(e[a],i);var j=n.Cartesian3.magnitude(n.Cartesian3.subtract(i,B,g));j>L&&(L=j);var k=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(i,U,g));if(k>N){var W=Math.sqrt(k);N=(z=.5*(z+W))*z;var Y=W-z;U.x=(z*U.x+Y*i.x)/W,U.y=(z*U.y+Y*i.y)/W,U.z=(z*U.z+Y*i.z)/W}}return z<L?(n.Cartesian3.clone(U,r.center),r.radius=z):(n.Cartesian3.clone(B,r.center),r.radius=L),r},f.fromInstancePoints=function(e,r,a){if(t.defined(r)||(r=new f),!t.defined(e)||0===a)return r.center=n.Cartesian3.clone(n.Cartesian3.ZERO,r.center),r.radius=0,r;var i,s=n.Cartesian3.clone(e[0],w),o=n.Cartesian3.clone(s,h),u=n.Cartesian3.clone(s,p),l=n.Cartesian3.clone(s,m),d=n.Cartesian3.clone(s,y),c=n.Cartesian3.clone(s,C),O=n.Cartesian3.clone(s,v);for(i=1;i<a;i++){n.Cartesian3.clone(e[i],s);var R=s.x,M=s.y,T=s.z;R<o.x&&n.Cartesian3.clone(s,o),R>d.x&&n.Cartesian3.clone(s,d),M<u.y&&n.Cartesian3.clone(s,u),M>c.y&&n.Cartesian3.clone(s,c),T<l.z&&n.Cartesian3.clone(s,l),T>O.z&&n.Cartesian3.clone(s,O)}var q=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(d,o,g)),A=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(c,u,g)),b=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(O,l,g)),D=o,I=d,P=q;A>P&&(P=A,D=u,I=c),b>P&&(P=b,D=l,I=O);var U=x;U.x=.5*(D.x+I.x),U.y=.5*(D.y+I.y),U.z=.5*(D.z+I.z);var N=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(I,U,g)),z=Math.sqrt(N),F=_;F.x=o.x,F.y=u.y,F.z=l.z;var V=E;V.x=d.x,V.y=c.y,V.z=O.z;var B=n.Cartesian3.midpoint(F,V,S),L=0;for(i=0;i<a;i++){n.Cartesian3.clone(e[i],s);var j=n.Cartesian3.magnitude(n.Cartesian3.subtract(s,B,g));j>L&&(L=j);var k=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(s,U,g));if(k>N){var W=Math.sqrt(k);N=(z=.5*(z+W))*z;var Y=W-z;U.x=(z*U.x+Y*s.x)/W,U.y=(z*U.y+Y*s.y)/W,U.z=(z*U.z+Y*s.z)/W}}return z<L?(n.Cartesian3.clone(U,r.center),r.radius=z):(n.Cartesian3.clone(B,r.center),r.radius=L),r};var R=new l,M=new n.Cartesian3,T=new n.Cartesian3,q=new a.Cartographic,A=new a.Cartographic;f.fromRectangle2D=function(e,t,r){return f.fromRectangleWithHeights2D(e,t,0,0,r)},f.fromRectangleWithHeights2D=function(e,r,a,i,s){if(t.defined(s)||(s=new f),!t.defined(e))return s.center=n.Cartesian3.clone(n.Cartesian3.ZERO,s.center),s.radius=0,s;r=t.defaultValue(r,R),o.Rectangle.southwest(e,q),q.height=a,o.Rectangle.northeast(e,A),A.height=i;var u=r.project(q,M),l=r.project(A,T),d=l.x-u.x,c=l.y-u.y,h=l.z-u.z;s.radius=.5*Math.sqrt(d*d+c*c+h*h);var p=s.center;return p.x=u.x+.5*d,p.y=u.y+.5*c,p.z=u.z+.5*h,s};var b=[];f.fromRectangle3D=function(e,r,i,s){if(r=t.defaultValue(r,a.Ellipsoid.WGS84),i=t.defaultValue(i,0),t.defined(s)||(s=new f),!t.defined(e))return s.center=n.Cartesian3.clone(n.Cartesian3.ZERO,s.center),s.radius=0,s;var u=o.Rectangle.subsample(e,r,i,b);return f.fromPoints(u,s)},f.fromVertices=function(e,r,a,i){if(t.defined(i)||(i=new f),!t.defined(e)||0===e.length)return i.center=n.Cartesian3.clone(n.Cartesian3.ZERO,i.center),i.radius=0,i;r=t.defaultValue(r,n.Cartesian3.ZERO),a=t.defaultValue(a,3);var s=w;s.x=e[0]+r.x,s.y=e[1]+r.y,s.z=e[2]+r.z;var o,u=n.Cartesian3.clone(s,h),l=n.Cartesian3.clone(s,p),d=n.Cartesian3.clone(s,m),c=n.Cartesian3.clone(s,y),O=n.Cartesian3.clone(s,C),R=n.Cartesian3.clone(s,v),M=e.length;for(o=0;o<M;o+=a){var T=e[o]+r.x,q=e[o+1]+r.y,A=e[o+2]+r.z;s.x=T,s.y=q,s.z=A,T<u.x&&n.Cartesian3.clone(s,u),T>c.x&&n.Cartesian3.clone(s,c),q<l.y&&n.Cartesian3.clone(s,l),q>O.y&&n.Cartesian3.clone(s,O),A<d.z&&n.Cartesian3.clone(s,d),A>R.z&&n.Cartesian3.clone(s,R)}var b=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(c,u,g)),D=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(O,l,g)),I=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(R,d,g)),P=u,U=c,N=b;D>N&&(N=D,P=l,U=O),I>N&&(N=I,P=d,U=R);var z=x;z.x=.5*(P.x+U.x),z.y=.5*(P.y+U.y),z.z=.5*(P.z+U.z);var F=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(U,z,g)),V=Math.sqrt(F),B=_;B.x=u.x,B.y=l.y,B.z=d.z;var L=E;L.x=c.x,L.y=O.y,L.z=R.z;var j=n.Cartesian3.midpoint(B,L,S),k=0;for(o=0;o<M;o+=a){s.x=e[o]+r.x,s.y=e[o+1]+r.y,s.z=e[o+2]+r.z;var W=n.Cartesian3.magnitude(n.Cartesian3.subtract(s,j,g));W>k&&(k=W);var Y=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(s,z,g));if(Y>F){var H=Math.sqrt(Y);F=(V=.5*(V+H))*V;var X=H-V;z.x=(V*z.x+X*s.x)/H,z.y=(V*z.y+X*s.y)/H,z.z=(V*z.z+X*s.z)/H}}return V<k?(n.Cartesian3.clone(z,i.center),i.radius=V):(n.Cartesian3.clone(j,i.center),i.radius=k),i},f.fromEncodedCartesianVertices=function(e,r,a){if(t.defined(a)||(a=new f),!t.defined(e)||!t.defined(r)||e.length!==r.length||0===e.length)return a.center=n.Cartesian3.clone(n.Cartesian3.ZERO,a.center),a.radius=0,a;var i=w;i.x=e[0]+r[0],i.y=e[1]+r[1],i.z=e[2]+r[2];var s,o=n.Cartesian3.clone(i,h),u=n.Cartesian3.clone(i,p),l=n.Cartesian3.clone(i,m),d=n.Cartesian3.clone(i,y),c=n.Cartesian3.clone(i,C),O=n.Cartesian3.clone(i,v),R=e.length;for(s=0;s<R;s+=3){var M=e[s]+r[s],T=e[s+1]+r[s+1],q=e[s+2]+r[s+2];i.x=M,i.y=T,i.z=q,M<o.x&&n.Cartesian3.clone(i,o),M>d.x&&n.Cartesian3.clone(i,d),T<u.y&&n.Cartesian3.clone(i,u),T>c.y&&n.Cartesian3.clone(i,c),q<l.z&&n.Cartesian3.clone(i,l),q>O.z&&n.Cartesian3.clone(i,O)}var A=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(d,o,g)),b=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(c,u,g)),D=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(O,l,g)),I=o,P=d,U=A;b>U&&(U=b,I=u,P=c),D>U&&(U=D,I=l,P=O);var N=x;N.x=.5*(I.x+P.x),N.y=.5*(I.y+P.y),N.z=.5*(I.z+P.z);var z=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(P,N,g)),F=Math.sqrt(z),V=_;V.x=o.x,V.y=u.y,V.z=l.z;var B=E;B.x=d.x,B.y=c.y,B.z=O.z;var L=n.Cartesian3.midpoint(V,B,S),j=0;for(s=0;s<R;s+=3){i.x=e[s]+r[s],i.y=e[s+1]+r[s+1],i.z=e[s+2]+r[s+2];var k=n.Cartesian3.magnitude(n.Cartesian3.subtract(i,L,g));k>j&&(j=k);var W=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(i,N,g));if(W>z){var Y=Math.sqrt(W);z=(F=.5*(F+Y))*F;var H=Y-F;N.x=(F*N.x+H*i.x)/Y,N.y=(F*N.y+H*i.y)/Y,N.z=(F*N.z+H*i.z)/Y}}return F<j?(n.Cartesian3.clone(N,a.center),a.radius=F):(n.Cartesian3.clone(L,a.center),a.radius=j),a},f.fromCornerPoints=function(e,r,a){t.defined(a)||(a=new f);var i=n.Cartesian3.midpoint(e,r,a.center);return a.radius=n.Cartesian3.distance(i,r),a},f.fromEllipsoid=function(e,r){return t.defined(r)||(r=new f),n.Cartesian3.clone(n.Cartesian3.ZERO,r.center),r.radius=e.maximumRadius,r};var D=new n.Cartesian3;f.fromBoundingSpheres=function(e,r){if(t.defined(r)||(r=new f),!t.defined(e)||0===e.length)return r.center=n.Cartesian3.clone(n.Cartesian3.ZERO,r.center),r.radius=0,r;var a=e.length;if(1===a)return f.clone(e[0],r);if(2===a)return f.union(e[0],e[1],r);var i,s=[];for(i=0;i<a;i++)s.push(e[i].center);var o=(r=f.fromPoints(s,r)).center,u=r.radius;for(i=0;i<a;i++){var l=e[i];u=Math.max(u,n.Cartesian3.distance(o,l.center,D)+l.radius)}return r.radius=u,r};var I=new n.Cartesian3,P=new n.Cartesian3,U=new n.Cartesian3;f.fromOrientedBoundingBox=function(e,r){t.defined(r)||(r=new f);var a=e.halfAxes,s=i.Matrix3.getColumn(a,0,I),o=i.Matrix3.getColumn(a,1,P),u=i.Matrix3.getColumn(a,2,U);return n.Cartesian3.add(s,o,s),n.Cartesian3.add(s,u,s),r.center=n.Cartesian3.clone(e.center,r.center),r.radius=n.Cartesian3.magnitude(s),r},f.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r.center=n.Cartesian3.clone(e.center,r.center),r.radius=e.radius,r):new f(e.center,e.radius)},f.packedLength=4,f.pack=function(e,r,n){n=t.defaultValue(n,0);var a=e.center;return r[n++]=a.x,r[n++]=a.y,r[n++]=a.z,r[n]=e.radius,r},f.unpack=function(e,r,n){r=t.defaultValue(r,0),t.defined(n)||(n=new f);var a=n.center;return a.x=e[r++],a.y=e[r++],a.z=e[r++],n.radius=e[r],n};var N=new n.Cartesian3,z=new n.Cartesian3;f.union=function(e,r,a){t.defined(a)||(a=new f);var i=e.center,s=e.radius,o=r.center,u=r.radius,l=n.Cartesian3.subtract(o,i,N),d=n.Cartesian3.magnitude(l);if(s>=d+u)return e.clone(a),a;if(u>=d+s)return r.clone(a),a;var c=.5*(s+d+u),h=n.Cartesian3.multiplyByScalar(l,(-s+c)/d,z);return n.Cartesian3.add(h,i,h),n.Cartesian3.clone(h,a.center),a.radius=c,a};var F=new n.Cartesian3;f.expand=function(e,t,r){r=f.clone(e,r);var a=n.Cartesian3.magnitude(n.Cartesian3.subtract(t,r.center,F));return a>r.radius&&(r.radius=a),r},f.intersectPlane=function(e,t){var r=e.center,a=e.radius,i=t.normal,s=n.Cartesian3.dot(i,r)+t.distance;return s<-a?d.OUTSIDE:s<a?d.INTERSECTING:d.INSIDE},f.transform=function(e,r,n){return t.defined(n)||(n=new f),n.center=i.Matrix4.multiplyByPoint(r,e.center,n.center),n.radius=i.Matrix4.getMaximumScale(r)*e.radius,n};var V=new n.Cartesian3;f.distanceSquaredTo=function(e,t){var r=n.Cartesian3.subtract(e.center,t,V);return n.Cartesian3.magnitudeSquared(r)-e.radius*e.radius},f.transformWithoutScale=function(e,r,n){return t.defined(n)||(n=new f),n.center=i.Matrix4.multiplyByPoint(r,e.center,n.center),n.radius=e.radius,n};var B=new n.Cartesian3;f.computePlaneDistances=function(e,r,a,i){t.defined(i)||(i=new c);var s=n.Cartesian3.subtract(e.center,r,B),o=n.Cartesian3.dot(a,s);return i.start=o-e.radius,i.stop=o+e.radius,i};for(var L=new n.Cartesian3,j=new n.Cartesian3,k=new n.Cartesian3,W=new n.Cartesian3,Y=new n.Cartesian3,H=new a.Cartographic,X=new Array(8),J=0;J<8;++J)X[J]=new n.Cartesian3;var Z=new l;function G(e,r,n,a){this.x=t.defaultValue(e,0),this.y=t.defaultValue(r,0),this.z=t.defaultValue(n,0),this.w=t.defaultValue(a,0)}f.projectTo2D=function(e,r,a){var i,s=(r=t.defaultValue(r,Z)).ellipsoid,o=e.center,u=e.radius;i=n.Cartesian3.equals(o,n.Cartesian3.ZERO)?n.Cartesian3.clone(n.Cartesian3.UNIT_X,L):s.geodeticSurfaceNormal(o,L);var l=n.Cartesian3.cross(n.Cartesian3.UNIT_Z,i,j);n.Cartesian3.normalize(l,l);var d=n.Cartesian3.cross(i,l,k);n.Cartesian3.normalize(d,d),n.Cartesian3.multiplyByScalar(i,u,i),n.Cartesian3.multiplyByScalar(d,u,d),n.Cartesian3.multiplyByScalar(l,u,l);var c=n.Cartesian3.negate(d,Y),h=n.Cartesian3.negate(l,W),p=X,m=p[0];n.Cartesian3.add(i,d,m),n.Cartesian3.add(m,l,m),m=p[1],n.Cartesian3.add(i,d,m),n.Cartesian3.add(m,h,m),m=p[2],n.Cartesian3.add(i,c,m),n.Cartesian3.add(m,h,m),m=p[3],n.Cartesian3.add(i,c,m),n.Cartesian3.add(m,l,m),n.Cartesian3.negate(i,i),m=p[4],n.Cartesian3.add(i,d,m),n.Cartesian3.add(m,l,m),m=p[5],n.Cartesian3.add(i,d,m),n.Cartesian3.add(m,h,m),m=p[6],n.Cartesian3.add(i,c,m),n.Cartesian3.add(m,h,m),m=p[7],n.Cartesian3.add(i,c,m),n.Cartesian3.add(m,l,m);for(var y=p.length,C=0;C<y;++C){var v=p[C];n.Cartesian3.add(o,v,v);var w=s.cartesianToCartographic(v,H);r.project(w,v)}var g=(o=(a=f.fromPoints(p,a)).center).x,x=o.y,_=o.z;return o.x=_,o.y=g,o.z=x,a},f.isOccluded=function(e,t){return!t.isBoundingSphereVisible(e)},f.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&n.Cartesian3.equals(e.center,r.center)&&e.radius===r.radius},f.prototype.intersectPlane=function(e){return f.intersectPlane(this,e)},f.prototype.distanceSquaredTo=function(e){return f.distanceSquaredTo(this,e)},f.prototype.computePlaneDistances=function(e,t,r){return f.computePlaneDistances(this,e,t,r)},f.prototype.isOccluded=function(e){return f.isOccluded(this,e)},f.prototype.equals=function(e){return f.equals(this,e)},f.prototype.clone=function(e){return f.clone(this,e)},f.prototype.volume=function(){var e=this.radius;return O*e*e*e};var K=new n.Cartesian3;G.fromAxisAngle=function(e,r,a){var i=r/2,s=Math.sin(i),o=(K=n.Cartesian3.normalize(e,K)).x*s,u=K.y*s,l=K.z*s,d=Math.cos(i);return t.defined(a)?(a.x=o,a.y=u,a.z=l,a.w=d,a):new G(o,u,l,d)};var Q=[1,2,0],$=new Array(3);G.fromRotationMatrix=function(e,r){var n,a,s,o,u,l=e[i.Matrix3.COLUMN0ROW0],d=e[i.Matrix3.COLUMN1ROW1],c=e[i.Matrix3.COLUMN2ROW2],f=l+d+c;if(f>0)u=.5*(n=Math.sqrt(f+1)),n=.5/n,a=(e[i.Matrix3.COLUMN1ROW2]-e[i.Matrix3.COLUMN2ROW1])*n,s=(e[i.Matrix3.COLUMN2ROW0]-e[i.Matrix3.COLUMN0ROW2])*n,o=(e[i.Matrix3.COLUMN0ROW1]-e[i.Matrix3.COLUMN1ROW0])*n;else{var h=0;d>l&&(h=1),c>l&&c>d&&(h=2);var p=Q[h],m=Q[p];n=Math.sqrt(e[i.Matrix3.getElementIndex(h,h)]-e[i.Matrix3.getElementIndex(p,p)]-e[i.Matrix3.getElementIndex(m,m)]+1);var y=$;y[h]=.5*n,n=.5/n,u=(e[i.Matrix3.getElementIndex(m,p)]-e[i.Matrix3.getElementIndex(p,m)])*n,y[p]=(e[i.Matrix3.getElementIndex(p,h)]+e[i.Matrix3.getElementIndex(h,p)])*n,y[m]=(e[i.Matrix3.getElementIndex(m,h)]+e[i.Matrix3.getElementIndex(h,m)])*n,a=-y[0],s=-y[1],o=-y[2]}return t.defined(r)?(r.x=a,r.y=s,r.z=o,r.w=u,r):new G(a,s,o,u)};var ee=new G,te=new G,re=new G,ne=new G;G.fromHeadingPitchRoll=function(e,t){return ne=G.fromAxisAngle(n.Cartesian3.UNIT_X,e.roll,ee),re=G.fromAxisAngle(n.Cartesian3.UNIT_Y,-e.pitch,t),t=G.multiply(re,ne,re),te=G.fromAxisAngle(n.Cartesian3.UNIT_Z,-e.heading,ee),G.multiply(te,t,t)};var ae=new n.Cartesian3,ie=new n.Cartesian3,se=new G,oe=new G,ue=new G;G.packedLength=4,G.pack=function(e,r,n){return n=t.defaultValue(n,0),r[n++]=e.x,r[n++]=e.y,r[n++]=e.z,r[n]=e.w,r},G.unpack=function(e,r,n){return r=t.defaultValue(r,0),t.defined(n)||(n=new G),n.x=e[r],n.y=e[r+1],n.z=e[r+2],n.w=e[r+3],n},G.packedInterpolationLength=3,G.convertPackedArrayForInterpolation=function(e,t,r,n){G.unpack(e,4*r,ue),G.conjugate(ue,ue);for(var a=0,i=r-t+1;a<i;a++){var s=3*a;G.unpack(e,4*(t+a),se),G.multiply(se,ue,se),se.w<0&&G.negate(se,se),G.computeAxis(se,ae);var o=G.computeAngle(se);n[s]=ae.x*o,n[s+1]=ae.y*o,n[s+2]=ae.z*o}},G.unpackInterpolationResult=function(e,r,a,i,s){t.defined(s)||(s=new G),n.Cartesian3.fromArray(e,0,ie);var o=n.Cartesian3.magnitude(ie);return G.unpack(r,4*i,oe),0===o?G.clone(G.IDENTITY,se):G.fromAxisAngle(ie,o,se),G.multiply(se,oe,s)},G.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r.x=e.x,r.y=e.y,r.z=e.z,r.w=e.w,r):new G(e.x,e.y,e.z,e.w)},G.conjugate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},G.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},G.magnitude=function(e){return Math.sqrt(G.magnitudeSquared(e))},G.normalize=function(e,t){var r=1/G.magnitude(e),n=e.x*r,a=e.y*r,i=e.z*r,s=e.w*r;return t.x=n,t.y=a,t.z=i,t.w=s,t},G.inverse=function(e,t){var r=G.magnitudeSquared(e);return t=G.conjugate(e,t),G.multiplyByScalar(t,1/r,t)},G.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},G.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},G.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},G.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},G.multiply=function(e,t,r){var n=e.x,a=e.y,i=e.z,s=e.w,o=t.x,u=t.y,l=t.z,d=t.w,c=s*o+n*d+a*l-i*u,f=s*u-n*l+a*d+i*o,h=s*l+n*u-a*o+i*d,p=s*d-n*o-a*u-i*l;return r.x=c,r.y=f,r.z=h,r.w=p,r},G.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},G.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},G.computeAxis=function(e,t){var r=e.w;if(Math.abs(r-1)<n.CesiumMath.EPSILON6)return t.x=t.y=t.z=0,t;var a=1/Math.sqrt(1-r*r);return t.x=e.x*a,t.y=e.y*a,t.z=e.z*a,t},G.computeAngle=function(e){return Math.abs(e.w-1)<n.CesiumMath.EPSILON6?0:2*Math.acos(e.w)};var le=new G;G.lerp=function(e,t,r,n){return le=G.multiplyByScalar(t,r,le),n=G.multiplyByScalar(e,1-r,n),G.add(le,n,n)};var de=new G,ce=new G,fe=new G;G.slerp=function(e,t,r,a){var i=G.dot(e,t),s=t;if(i<0&&(i=-i,s=de=G.negate(t,de)),1-i<n.CesiumMath.EPSILON6)return G.lerp(e,s,r,a);var o=Math.acos(i);return ce=G.multiplyByScalar(e,Math.sin((1-r)*o),ce),fe=G.multiplyByScalar(s,Math.sin(r*o),fe),a=G.add(ce,fe,a),G.multiplyByScalar(a,1/Math.sin(o),a)},G.log=function(e,t){var r=n.CesiumMath.acosClamped(e.w),a=0;return 0!==r&&(a=r/Math.sin(r)),n.Cartesian3.multiplyByScalar(e,a,t)},G.exp=function(e,t){var r=n.Cartesian3.magnitude(e),a=0;return 0!==r&&(a=Math.sin(r)/r),t.x=e.x*a,t.y=e.y*a,t.z=e.z*a,t.w=Math.cos(r),t};var he=new n.Cartesian3,pe=new n.Cartesian3,me=new G,ye=new G;G.computeInnerQuadrangle=function(e,t,r,a){var i=G.conjugate(t,me);G.multiply(i,r,ye);var s=G.log(ye,he);G.multiply(i,e,ye);var o=G.log(ye,pe);return n.Cartesian3.add(s,o,s),n.Cartesian3.multiplyByScalar(s,.25,s),n.Cartesian3.negate(s,s),G.exp(s,me),G.multiply(t,me,a)},G.squad=function(e,t,r,n,a,i){var s=G.slerp(e,t,a,me),o=G.slerp(r,n,a,ye);return G.slerp(s,o,2*a*(1-a),i)};for(var Ce=new G,ve=1.9011074535173003,we=u.FeatureDetection.supportsTypedArrays()?new Float32Array(8):[],ge=u.FeatureDetection.supportsTypedArrays()?new Float32Array(8):[],xe=u.FeatureDetection.supportsTypedArrays()?new Float32Array(8):[],_e=u.FeatureDetection.supportsTypedArrays()?new Float32Array(8):[],Ee=0;Ee<7;++Ee){var Se=Ee+1,Oe=2*Se+1;we[Ee]=1/(Se*Oe),ge[Ee]=Se/Oe}function Re(e,t,r){for(var n,a,i=0,s=e.length-1;i<=s;)if((a=r(e[n=~~((i+s)/2)],t))<0)i=n+1;else{if(!(a>0))return n;s=n-1}return~(s+1)}function Me(e,t,r,n,a){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=r,this.yPoleOffset=n,this.ut1MinusUtc=a}
/**
    @license
    sprintf.js from the php.js project - https://github.com/kvz/phpjs
    Directly from https://github.com/kvz/phpjs/blob/master/functions/strings/sprintf.js

    php.js is copyright 2012 Kevin van Zonneveld.

    Portions copyright Brett Zamir (http://brett-zamir.me), Kevin van Zonneveld
    (http://kevin.vanzonneveld.net), Onno Marsman, Theriault, Michael White
    (http://getsprink.com), Waldo Malqui Silva, Paulo Freitas, Jack, Jonas
    Raoni Soares Silva (http://www.jsfromhell.com), Philip Peterson, Legaev
    Andrey, Ates Goral (http://magnetiq.com), Alex, Ratheous, Martijn Wieringa,
    Rafa? Kukawski (http://blog.kukawski.pl), lmeyrick
    (https://sourceforge.net/projects/bcmath-js/), Nate, Philippe Baumann,
    Enrique Gonzalez, Webtoolkit.info (http://www.webtoolkit.info/), Carlos R.
    L. Rodrigues (http://www.jsfromhell.com), Ash Searle
    (http://hexmen.com/blog/), Jani Hartikainen, travc, Ole Vrijenhoek,
    Erkekjetter, Michael Grier, Rafa? Kukawski (http://kukawski.pl), Johnny
    Mast (http://www.phpvrouwen.nl), T.Wild, d3x,
    http://stackoverflow.com/questions/57803/how-to-convert-decimal-to-hex-in-javascript,
    Rafa? Kukawski (http://blog.kukawski.pl/), stag019, pilus, WebDevHobo
    (http://webdevhobo.blogspot.com/), marrtins, GeekFG
    (http://geekfg.blogspot.com), Andrea Giammarchi
    (http://webreflection.blogspot.com), Arpad Ray (mailto:arpad@php.net),
    gorthaur, Paul Smith, Tim de Koning (http://www.kingsquare.nl), Joris, Oleg
    Eremeev, Steve Hilder, majak, gettimeofday, KELAN, Josh Fraser
    (http://onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/),
    Marc Palau, Martin
    (http://www.erlenwiese.de/), Breaking Par Consulting Inc
    (http://www.breakingpar.com/bkp/home.nsf/0/87256B280015193F87256CFB006C45F7),
    Chris, Mirek Slugen, saulius, Alfonso Jimenez
    (http://www.alfonsojimenez.com), Diplom@t (http://difane.com/), felix,
    Mailfaker (http://www.weedem.fr/), Tyler Akins (http://rumkin.com), Caio
    Ariede (http://caioariede.com), Robin, Kankrelune
    (http://www.webfaktory.info/), Karol Kowalski, Imgen Tata
    (http://www.myipdf.com/), mdsjack (http://www.mdsjack.bo.it), Dreamer,
    Felix Geisendoerfer (http://www.debuggable.com/felix), Lars Fischer, AJ,
    David, Aman Gupta, Michael White, Public Domain
    (http://www.json.org/json2.js), Steven Levithan
    (http://blog.stevenlevithan.com), Sakimori, Pellentesque Malesuada,
    Thunder.m, Dj (http://phpjs.org/functions/htmlentities:425#comment_134018),
    Steve Clay, David James, Francois, class_exists, nobbler, T. Wild, Itsacon
    (http://www.itsacon.net/), date, Ole Vrijenhoek (http://www.nervous.nl/),
    Fox, Raphael (Ao RUDLER), Marco, noname, Mateusz "loonquawl" Zalega, Frank
    Forte, Arno, ger, mktime, john (http://www.jd-tech.net), Nick Kolosov
    (http://sammy.ru), marc andreu, Scott Cariss, Douglas Crockford
    (http://javascript.crockford.com), madipta, Slawomir Kaniecki,
    ReverseSyntax, Nathan, Alex Wilson, kenneth, Bayron Guevara, Adam Wallner
    (http://web2.bitbaro.hu/), paulo kuong, jmweb, Lincoln Ramsay, djmix,
    Pyerre, Jon Hohle, Thiago Mata (http://thiagomata.blog.com), lmeyrick
    (https://sourceforge.net/projects/bcmath-js/this.), Linuxworld, duncan,
    Gilbert, Sanjoy Roy, Shingo, sankai, Oskar Larsson H?gfeldt
    (http://oskar-lh.name/), Denny Wardhana, 0m3r, Everlasto, Subhasis Deb,
    josh, jd, Pier Paolo Ramon (http://www.mastersoup.com/), P, merabi, Soren
    Hansen, Eugene Bulkin (http://doubleaw.com/), Der Simon
    (http://innerdom.sourceforge.net/), echo is bad, Ozh, XoraX
    (http://www.xorax.info), EdorFaus, JB, J A R, Marc Jansen, Francesco, LH,
    Stoyan Kyosev (http://www.svest.org/), nord_ua, omid
    (http://phpjs.org/functions/380:380#comment_137122), Brad Touesnard, MeEtc
    (http://yass.meetcweb.com), Peter-Paul Koch
    (http://www.quirksmode.org/js/beat.html), Olivier Louvignes
    (http://mg-crea.com/), T0bsn, Tim Wiel, Bryan Elliott, Jalal Berrami,
    Martin, JT, David Randall, Thomas Beaucourt (http://www.webapp.fr), taith,
    vlado houba, Pierre-Luc Paour, Kristof Coomans (SCK-CEN Belgian Nucleair
    Research Centre), Martin Pool, Kirk Strobeck, Rick Waldron, Brant Messenger
    (http://www.brantmessenger.com/), Devan Penner-Woelk, Saulo Vallory, Wagner
    B. Soares, Artur Tchernychev, Valentina De Rosa, Jason Wong
    (http://carrot.org/), Christoph, Daniel Esteban, strftime, Mick@el, rezna,
    Simon Willison (http://simonwillison.net), Anton Ongson, Gabriel Paderni,
    Marco van Oort, penutbutterjelly, Philipp Lenssen, Bjorn Roesbeke
    (http://www.bjornroesbeke.be/), Bug?, Eric Nagel, Tomasz Wesolowski,
    Evertjan Garretsen, Bobby Drake, Blues (http://tech.bluesmoon.info/), Luke
    Godfrey, Pul, uestla, Alan C, Ulrich, Rafal Kukawski, Yves Sucaet,
    sowberry, Norman "zEh" Fuchs, hitwork, Zahlii, johnrembo, Nick Callen,
    Steven Levithan (stevenlevithan.com), ejsanders, Scott Baker, Brian Tafoya
    (http://www.premasolutions.com/), Philippe Jausions
    (http://pear.php.net/user/jausions), Aidan Lister
    (http://aidanlister.com/), Rob, e-mike, HKM, ChaosNo1, metjay, strcasecmp,
    strcmp, Taras Bogach, jpfle, Alexander Ermolaev
    (http://snippets.dzone.com/user/AlexanderErmolaev), DxGx, kilops, Orlando,
    dptr1988, Le Torbi, James (http://www.james-bell.co.uk/), Pedro Tainha
    (http://www.pedrotainha.com), James, Arnout Kazemier
    (http://www.3rd-Eden.com), Chris McMacken, gabriel paderni, Yannoo,
    FGFEmperor, baris ozdil, Tod Gentille, Greg Frazier, jakes, 3D-GRAF, Allan
    Jensen (http://www.winternet.no), Howard Yeend, Benjamin Lupton, davook,
    daniel airton wermann (http://wermann.com.br), Atli T¨®r, Maximusya, Ryan
    W Tenney (http://ryan.10e.us), Alexander M Beedie, fearphage
    (http://http/my.opera.com/fearphage/), Nathan Sepulveda, Victor, Matteo,
    Billy, stensi, Cord, Manish, T.J. Leahy, Riddler
    (http://www.frontierwebdev.com/), Rafa? Kukawski, FremyCompany, Matt
    Bradley, Tim de Koning, Luis Salazar (http://www.freaky-media.com/), Diogo
    Resende, Rival, Andrej Pavlovic, Garagoth, Le Torbi
    (http://www.letorbi.de/), Dino, Josep Sanz (http://www.ws3.es/), rem,
    Russell Walker (http://www.nbill.co.uk/), Jamie Beck
    (http://www.terabit.ca/), setcookie, Michael, YUI Library:
    http://developer.yahoo.com/yui/docs/YAHOO.util.DateLocale.html, Blues at
    http://hacks.bluesmoon.info/strftime/strftime.js, Ben
    (http://benblume.co.uk/), DtTvB
    (http://dt.in.th/2008-09-16.string-length-in-bytes.html), Andreas, William,
    meo, incidence, Cagri Ekin, Amirouche, Amir Habibi
    (http://www.residence-mixte.com/), Luke Smith (http://lucassmith.name),
    Kheang Hok Chin (http://www.distantia.ca/), Jay Klehr, Lorenzo Pisani,
    Tony, Yen-Wei Liu, Greenseed, mk.keck, Leslie Hoare, dude, booeyOH, Ben
    Bryan

    Licensed under the MIT (MIT-LICENSE.txt) license.

    Permission is hereby granted, free of charge, to any person obtaining a
    copy of this software and associated documentation files (the
    "Software"), to deal in the Software without restriction, including
    without limitation the rights to use, copy, modify, merge, publish,
    distribute, sublicense, and/or sell copies of the Software, and to
    permit persons to whom the Software is furnished to do so, subject to
    the following conditions:

    The above copyright notice and this permission notice shall be included
    in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
    OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
    MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
    IN NO EVENT SHALL KEVIN VAN ZONNEVELD BE LIABLE FOR ANY CLAIM, DAMAGES
    OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
    ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
    OTHER DEALINGS IN THE SOFTWARE.
    */function Te(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,t=arguments,r=0,n=t[r++],a=function(e,t,r,n){r||(r=" ");var a=e.length>=t?"":Array(1+t-e.length>>>0).join(r);return n?e+a:a+e},i=function(e,t,r,n,i,s){var o=n-e.length;return o>0&&(e=r||!i?a(e,n,s,r):e.slice(0,t.length)+a("",o,"0",!0)+e.slice(t.length)),e},s=function(e,t,r,n,s,o,u){var l=e>>>0;return e=(r=r&&l&&{2:"0b",8:"0",16:"0x"}[t]||"")+a(l.toString(t),o||0,"0",!1),i(e,r,n,s,u)},o=function(e,t,r,n,a,s){return null!=n&&(e=e.slice(0,n)),i(e,"",t,r,a,s)},u=function(e,n,u,l,d,c,f){var h,p,m,y,C;if("%%"==e)return"%";for(var v=!1,w="",g=!1,x=!1,_=" ",E=u.length,S=0;u&&S<E;S++)switch(u.charAt(S)){case" ":w=" ";break;case"+":w="+";break;case"-":v=!0;break;case"'":_=u.charAt(S+1);break;case"0":g=!0;break;case"#":x=!0}if((l=l?"*"==l?+t[r++]:"*"==l.charAt(0)?+t[l.slice(1,-1)]:+l:0)<0&&(l=-l,v=!0),!isFinite(l))throw new Error("sprintf: (minimum-)width must be finite");switch(c=c?"*"==c?+t[r++]:"*"==c.charAt(0)?+t[c.slice(1,-1)]:+c:"fFeE".indexOf(f)>-1?6:"d"==f?0:void 0,C=n?t[n.slice(0,-1)]:t[r++],f){case"s":return o(String(C),v,l,c,g,_);case"c":return o(String.fromCharCode(+C),v,l,c,g);case"b":return s(C,2,x,v,l,c,g);case"o":return s(C,8,x,v,l,c,g);case"x":return s(C,16,x,v,l,c,g);case"X":return s(C,16,x,v,l,c,g).toUpperCase();case"u":return s(C,10,x,v,l,c,g);case"i":case"d":return h=+C||0,C=(p=(h=Math.round(h-h%1))<0?"-":w)+a(String(Math.abs(h)),c,"0",!1),i(C,p,v,l,g);case"e":case"E":case"f":case"F":case"g":case"G":return p=(h=+C)<0?"-":w,m=["toExponential","toFixed","toPrecision"]["efg".indexOf(f.toLowerCase())],y=["toString","toUpperCase"]["eEfFgG".indexOf(f)%2],C=p+Math.abs(h)[m](c),i(C,p,v,l,g)[y]();default:return e}};return n.replace(e,u)}function qe(e,t,r,n,a,i,s,o){this.year=e,this.month=t,this.day=r,this.hour=n,this.minute=a,this.second=i,this.millisecond=s,this.isLeapSecond=o}function Ae(e){return e%4==0&&e%100!=0||e%400==0}function be(e,t){this.julianDate=e,this.offset=t}we[7]=ve/136,ge[7]=8*ve/17,G.fastSlerp=function(e,t,r,n){var a,i=G.dot(e,t);i>=0?a=1:(a=-1,i=-i);for(var s=i-1,o=1-r,u=r*r,l=o*o,d=7;d>=0;--d)xe[d]=(we[d]*u-ge[d])*s,_e[d]=(we[d]*l-ge[d])*s;var c=a*r*(1+xe[0]*(1+xe[1]*(1+xe[2]*(1+xe[3]*(1+xe[4]*(1+xe[5]*(1+xe[6]*(1+xe[7])))))))),f=o*(1+_e[0]*(1+_e[1]*(1+_e[2]*(1+_e[3]*(1+_e[4]*(1+_e[5]*(1+_e[6]*(1+_e[7])))))))),h=G.multiplyByScalar(e,f,Ce);return G.multiplyByScalar(t,c,n),G.add(h,n,n)},G.fastSquad=function(e,t,r,n,a,i){var s=G.fastSlerp(e,t,a,me),o=G.fastSlerp(r,n,a,ye);return G.fastSlerp(s,o,2*a*(1-a),i)},G.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&e.x===r.x&&e.y===r.y&&e.z===r.z&&e.w===r.w},G.equalsEpsilon=function(e,r,n){return e===r||t.defined(e)&&t.defined(r)&&Math.abs(e.x-r.x)<=n&&Math.abs(e.y-r.y)<=n&&Math.abs(e.z-r.z)<=n&&Math.abs(e.w-r.w)<=n},G.ZERO=Object.freeze(new G(0,0,0,0)),G.IDENTITY=Object.freeze(new G(0,0,0,1)),G.prototype.clone=function(e){return G.clone(this,e)},G.prototype.equals=function(e){return G.equals(this,e)},G.prototype.equalsEpsilon=function(e,t){return G.equalsEpsilon(this,e,t)},G.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var De=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),Ie=Object.freeze({UTC:0,TAI:1}),Pe=new qe,Ue=[31,28,31,30,31,30,31,31,30,31,30,31];function Ne(e,t){return Ke.compare(e.julianDate,t.julianDate)}var ze=new be;function Fe(e){ze.julianDate=e;var t=Ke.leapSeconds,r=Re(t,ze,Ne);r<0&&(r=~r),r>=t.length&&(r=t.length-1);var n=t[r].offset;r>0&&(Ke.secondsDifference(t[r].julianDate,e)>n&&(n=t[--r].offset));Ke.addSeconds(e,n,e)}function Ve(e,t){ze.julianDate=e;var r=Ke.leapSeconds,n=Re(r,ze,Ne);if(n<0&&(n=~n),0===n)return Ke.addSeconds(e,-r[0].offset,t);if(n>=r.length)return Ke.addSeconds(e,-r[n-1].offset,t);var a=Ke.secondsDifference(r[n].julianDate,e);return 0===a?Ke.addSeconds(e,-r[n].offset,t):a<=1?void 0:Ke.addSeconds(e,-r[--n].offset,t)}function Be(e,t,r){var n=t/De.SECONDS_PER_DAY|0;return e+=n,(t-=De.SECONDS_PER_DAY*n)<0&&(e--,t+=De.SECONDS_PER_DAY),r.dayNumber=e,r.secondsOfDay=t,r}function Le(e,t,r,n,a,i,s){var o=(t-14)/12|0,u=e+4800+o,l=(1461*u/4|0)+(367*(t-2-12*o)/12|0)-(3*((u+100)/100|0)/4|0)+r-32075;(n-=12)<0&&(n+=24);var d=i+(n*De.SECONDS_PER_HOUR+a*De.SECONDS_PER_MINUTE+s*De.SECONDS_PER_MILLISECOND);return d>=43200&&(l-=1),[l,d]}var je=/^(\d{4})$/,ke=/^(\d{4})-(\d{2})$/,We=/^(\d{4})-?(\d{3})$/,Ye=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,He=/^(\d{4})-?(\d{2})-?(\d{2})$/,Xe=/([Z+\-])?(\d{2})?:?(\d{2})?$/,Je=/^(\d{2})(\.\d+)?/.source+Xe.source,Ze=/^(\d{2}):?(\d{2})(\.\d+)?/.source+Xe.source,Ge=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+Xe.source;function Ke(e,r,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=t.defaultValue(e,0),r=t.defaultValue(r,0),n=t.defaultValue(n,Ie.UTC);var a=0|e;Be(a,r+=(e-a)*De.SECONDS_PER_DAY,this),n===Ie.UTC&&Fe(this)}Ke.fromGregorianDate=function(e,r){var n=Le(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return t.defined(r)?(Be(n[0],n[1],r),Fe(r),r):new Ke(n[0],n[1],Ie.UTC)},Ke.fromDate=function(e,r){var n=Le(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return t.defined(r)?(Be(n[0],n[1],r),Fe(r),r):new Ke(n[0],n[1],Ie.UTC)},Ke.fromIso8601=function(e,r){var n,a,i,s,o=(e=e.replace(",",".")).split("T"),u=1,l=1,d=0,c=0,f=0,h=0,p=o[0],m=o[1];if(null!==(o=p.match(He)))n=+o[1],u=+o[2],l=+o[3];else if(null!==(o=p.match(ke)))n=+o[1],u=+o[2];else if(null!==(o=p.match(je)))n=+o[1];else{var y;if(null!==(o=p.match(We)))n=+o[1],y=+o[2],i=Ae(n);else if(null!==(o=p.match(Ye)))n=+o[1],y=7*+o[2]+(+o[3]||0)-new Date(Date.UTC(n,0,4)).getUTCDay()-3;(a=new Date(Date.UTC(n,0,1))).setUTCDate(y),u=a.getUTCMonth()+1,l=a.getUTCDate()}if(i=Ae(n),t.defined(m)){null!==(o=m.match(Ge))?(d=+o[1],c=+o[2],f=+o[3],h=1e3*+(o[4]||0),s=5):null!==(o=m.match(Ze))?(d=+o[1],c=+o[2],f=60*+(o[3]||0),s=4):null!==(o=m.match(Je))&&(d=+o[1],c=60*+(o[2]||0),s=3);var C=o[s],v=+o[s+1],w=+(o[s+2]||0);switch(C){case"+":d-=v,c-=w;break;case"-":d+=v,c+=w;break;case"Z":break;default:c+=new Date(Date.UTC(n,u-1,l,d,c)).getTimezoneOffset()}}var g=60===f;for(g&&f--;c>=60;)c-=60,d++;for(;d>=24;)d-=24,l++;for(a=i&&2===u?29:Ue[u-1];l>a;)l-=a,++u>12&&(u-=12,n++),a=i&&2===u?29:Ue[u-1];for(;c<0;)c+=60,d--;for(;d<0;)d+=24,l--;for(;l<1;)--u<1&&(u+=12,n--),l+=a=i&&2===u?29:Ue[u-1];var x=Le(n,u,l,d,c,f,h);return t.defined(r)?(Be(x[0],x[1],r),Fe(r)):r=new Ke(x[0],x[1],Ie.UTC),g&&Ke.addSeconds(r,1,r),r},Ke.now=function(e){return Ke.fromDate(new Date,e)};var Qe=new Ke(0,0,Ie.TAI);
/**
     * @license
     *
     * Grauw URI utilities
     *
     * See: http://hg.grauw.nl/grauw-lib/file/tip/src/uri.js
     *
     * @author Laurens Holst (http://www.grauw.nl/)
     *
     *   Copyright 2012 Laurens Holst
     *
     *   Licensed under the Apache License, Version 2.0 (the "License");
     *   you may not use this file except in compliance with the License.
     *   You may obtain a copy of the License at
     *
     *       http://www.apache.org/licenses/LICENSE-2.0
     *
     *   Unless required by applicable law or agreed to in writing, software
     *   distributed under the License is distributed on an "AS IS" BASIS,
     *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     *   See the License for the specific language governing permissions and
     *   limitations under the License.
     *
     */
function $e(e){if(e instanceof $e)this.scheme=e.scheme,this.authority=e.authority,this.path=e.path,this.query=e.query,this.fragment=e.fragment;else if(e){var t=et.exec(e);this.scheme=t[1],this.authority=t[2],this.path=t[3],this.query=t[4],this.fragment=t[5]}}Ke.toGregorianDate=function(e,r){var n=!1,a=Ve(e,Qe);t.defined(a)||(Ke.addSeconds(e,-1,Qe),a=Ve(Qe,Qe),n=!0);var i=a.dayNumber,s=a.secondsOfDay;s>=43200&&(i+=1);var o=i+68569|0,u=4*o/146097|0,l=4e3*((o=o-((146097*u+3)/4|0)|0)+1)/1461001|0,d=80*(o=o-(1461*l/4|0)+31|0)/2447|0,c=o-(2447*d/80|0)|0,f=d+2-12*(o=d/11|0)|0,h=100*(u-49)+l+o|0,p=s/De.SECONDS_PER_HOUR|0,m=s-p*De.SECONDS_PER_HOUR,y=m/De.SECONDS_PER_MINUTE|0,C=0|(m-=y*De.SECONDS_PER_MINUTE),v=(m-C)/De.SECONDS_PER_MILLISECOND;return(p+=12)>23&&(p-=24),n&&(C+=1),t.defined(r)?(r.year=h,r.month=f,r.day=c,r.hour=p,r.minute=y,r.second=C,r.millisecond=v,r.isLeapSecond=n,r):new qe(h,f,c,p,y,C,v,n)},Ke.toDate=function(e){var t=Ke.toGregorianDate(e,Pe),r=t.second;return t.isLeapSecond&&(r-=1),new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,r,t.millisecond))},Ke.toIso8601=function(e,r){var n=Ke.toGregorianDate(e,Pe),a=n.year,i=n.month,s=n.day,o=n.hour,u=n.minute,l=n.second,d=n.millisecond;return 1e4===a&&1===i&&1===s&&0===o&&0===u&&0===l&&0===d&&(a=9999,i=12,s=31,o=24),t.defined(r)||0===d?t.defined(r)&&0!==r?Te("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",a,i,s,o,u,l,(.01*d).toFixed(r).replace(".","").slice(0,r)):Te("%04d-%02d-%02dT%02d:%02d:%02dZ",a,i,s,o,u,l):Te("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",a,i,s,o,u,l,(.01*d).toString().replace(".",""))},Ke.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r.dayNumber=e.dayNumber,r.secondsOfDay=e.secondsOfDay,r):new Ke(e.dayNumber,e.secondsOfDay,Ie.TAI)},Ke.compare=function(e,t){var r=e.dayNumber-t.dayNumber;return 0!==r?r:e.secondsOfDay-t.secondsOfDay},Ke.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&e.dayNumber===r.dayNumber&&e.secondsOfDay===r.secondsOfDay},Ke.equalsEpsilon=function(e,r,n){return e===r||t.defined(e)&&t.defined(r)&&Math.abs(Ke.secondsDifference(e,r))<=n},Ke.totalDays=function(e){return e.dayNumber+e.secondsOfDay/De.SECONDS_PER_DAY},Ke.secondsDifference=function(e,t){return(e.dayNumber-t.dayNumber)*De.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},Ke.daysDifference=function(e,t){return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/De.SECONDS_PER_DAY},Ke.computeTaiMinusUtc=function(e){ze.julianDate=e;var t=Ke.leapSeconds,r=Re(t,ze,Ne);return r<0&&(r=~r,--r<0&&(r=0)),t[r].offset},Ke.addSeconds=function(e,t,r){return Be(e.dayNumber,e.secondsOfDay+t,r)},Ke.addMinutes=function(e,t,r){var n=e.secondsOfDay+t*De.SECONDS_PER_MINUTE;return Be(e.dayNumber,n,r)},Ke.addHours=function(e,t,r){var n=e.secondsOfDay+t*De.SECONDS_PER_HOUR;return Be(e.dayNumber,n,r)},Ke.addDays=function(e,t,r){return Be(e.dayNumber+t,e.secondsOfDay,r)},Ke.lessThan=function(e,t){return Ke.compare(e,t)<0},Ke.lessThanOrEquals=function(e,t){return Ke.compare(e,t)<=0},Ke.greaterThan=function(e,t){return Ke.compare(e,t)>0},Ke.greaterThanOrEquals=function(e,t){return Ke.compare(e,t)>=0},Ke.prototype.clone=function(e){return Ke.clone(this,e)},Ke.prototype.equals=function(e){return Ke.equals(this,e)},Ke.prototype.equalsEpsilon=function(e,t){return Ke.equalsEpsilon(this,e,t)},Ke.prototype.toString=function(){return Ke.toIso8601(this)},Ke.leapSeconds=[new be(new Ke(2441317,43210,Ie.TAI),10),new be(new Ke(2441499,43211,Ie.TAI),11),new be(new Ke(2441683,43212,Ie.TAI),12),new be(new Ke(2442048,43213,Ie.TAI),13),new be(new Ke(2442413,43214,Ie.TAI),14),new be(new Ke(2442778,43215,Ie.TAI),15),new be(new Ke(2443144,43216,Ie.TAI),16),new be(new Ke(2443509,43217,Ie.TAI),17),new be(new Ke(2443874,43218,Ie.TAI),18),new be(new Ke(2444239,43219,Ie.TAI),19),new be(new Ke(2444786,43220,Ie.TAI),20),new be(new Ke(2445151,43221,Ie.TAI),21),new be(new Ke(2445516,43222,Ie.TAI),22),new be(new Ke(2446247,43223,Ie.TAI),23),new be(new Ke(2447161,43224,Ie.TAI),24),new be(new Ke(2447892,43225,Ie.TAI),25),new be(new Ke(2448257,43226,Ie.TAI),26),new be(new Ke(2448804,43227,Ie.TAI),27),new be(new Ke(2449169,43228,Ie.TAI),28),new be(new Ke(2449534,43229,Ie.TAI),29),new be(new Ke(2450083,43230,Ie.TAI),30),new be(new Ke(2450630,43231,Ie.TAI),31),new be(new Ke(2451179,43232,Ie.TAI),32),new be(new Ke(2453736,43233,Ie.TAI),33),new be(new Ke(2454832,43234,Ie.TAI),34),new be(new Ke(2456109,43235,Ie.TAI),35),new be(new Ke(2457204,43236,Ie.TAI),36),new be(new Ke(2457754,43237,Ie.TAI),37)],$e.prototype.scheme=null,$e.prototype.authority=null,$e.prototype.path="",$e.prototype.query=null,$e.prototype.fragment=null;var et=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");$e.prototype.getScheme=function(){return this.scheme},$e.prototype.getAuthority=function(){return this.authority},$e.prototype.getPath=function(){return this.path},$e.prototype.getQuery=function(){return this.query},$e.prototype.getFragment=function(){return this.fragment},$e.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},$e.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},$e.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},$e.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(nt,it).replace(tt,at)),this.path&&(this.path=this.path.replace(tt,at)),this.query&&(this.query=this.query.replace(tt,at)),this.fragment&&(this.fragment=this.fragment.replace(tt,at))};var tt=/%[0-9a-z]{2}/gi,rt=/[a-zA-Z0-9\-\._~]/,nt=/(.*@)?([^@:]*)(:.*)?/;function at(e){var t=unescape(e);return rt.test(t)?t:e.toUpperCase()}function it(e,t,r,n){return(t||"")+r.toLowerCase()+(n||"")}function st(e,r){if(null===e||"object"!=typeof e)return e;r=t.defaultValue(r,!1);var n=new e.constructor;for(var a in e)if(e.hasOwnProperty(a)){var i=e[a];r&&(i=st(i,r)),n[a]=i}return n}function ot(e,r,n){n=t.defaultValue(n,!1);var a,i,s,o={},u=t.defined(e),l=t.defined(r);if(u)for(a in e)e.hasOwnProperty(a)&&(i=e[a],l&&n&&"object"==typeof i&&r.hasOwnProperty(a)?(s=r[a],o[a]="object"==typeof s?ot(i,s,n):i):o[a]=i);if(l)for(a in r)r.hasOwnProperty(a)&&!o.hasOwnProperty(a)&&(s=r[a],o[a]=s);return o}function ut(e,t){var r;return"undefined"!=typeof document&&(r=document),ut._implementation(e,t,r)}$e.prototype.resolve=function(e){var t=new $e;return this.scheme?(t.scheme=this.scheme,t.authority=this.authority,t.path=this.path,t.query=this.query):(t.scheme=e.scheme,this.authority?(t.authority=this.authority,t.path=this.path,t.query=this.query):(t.authority=e.authority,""==this.path?(t.path=e.path,t.query=this.query||e.query):("/"==this.path.charAt(0)?(t.path=this.path,t.removeDotSegments()):(e.authority&&""==e.path?t.path="/"+this.path:t.path=e.path.substring(0,e.path.lastIndexOf("/")+1)+this.path,t.removeDotSegments()),t.query=this.query))),t.fragment=this.fragment,t},$e.prototype.removeDotSegments=function(){var e,t=this.path.split("/"),r=[],n=""==t[0];n&&t.shift();for(""==t[0]&&t.shift();t.length;)".."==(e=t.shift())?r.pop():"."!=e&&r.push(e);"."!=e&&".."!=e||r.push(""),n&&r.unshift(""),this.path=r.join("/")},$e.prototype.toString=function(){var e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e},ut._implementation=function(e,r,n){if(!t.defined(r)){if(void 0===n)return e;r=t.defaultValue(n.baseURI,n.location.href)}var a=new $e(r);return new $e(e).resolve(a).toString()};var lt,dt=/^blob:/i;function ct(e){return dt.test(e)}var ft=/^data:/i;function ht(e){return ft.test(e)}var pt=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),mt=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function yt(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT);var r=t.defaultValue(e.throttleByServer,!1),n=t.defaultValue(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=t.defaultValue(e.priority,0),this.throttle=n,this.throttleByServer=r,this.type=t.defaultValue(e.type,mt.OTHER),this.serverKey=void 0,this.state=pt.UNISSUED,this.deferred=void 0,this.cancelled=!1}function Ct(e,t,r){this.statusCode=e,this.response=t,this.responseHeaders=r,"string"==typeof this.responseHeaders&&(this.responseHeaders=function(e){var t={};if(!e)return t;for(var r=e.split("\r\n"),n=0;n<r.length;++n){var a=r[n],i=a.indexOf(": ");if(i>0){var s=a.substring(0,i),o=a.substring(i+2);t[s]=o}}return t}(this.responseHeaders))}function vt(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function wt(e,t){return t-e}function gt(e){this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function xt(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}yt.prototype.cancel=function(){this.cancelled=!0},yt.prototype.clone=function(e){return t.defined(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new yt(this)},Ct.prototype.toString=function(){var e="Request has failed.";return t.defined(this.statusCode)&&(e+=" Status Code: "+this.statusCode),e},Object.defineProperties(vt.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),vt.prototype.addEventListener=function(e,t){this._listeners.push(e),this._scopes.push(t);var r=this;return function(){r.removeEventListener(e,t)}},vt.prototype.removeEventListener=function(e,t){for(var r=this._listeners,n=this._scopes,a=-1,i=0;i<r.length;i++)if(r[i]===e&&n[i]===t){a=i;break}return-1!==a&&(this._insideRaiseEvent?(this._toRemove.push(a),r[a]=void 0,n[a]=void 0):(r.splice(a,1),n.splice(a,1)),!0)},vt.prototype.raiseEvent=function(){var e;this._insideRaiseEvent=!0;var r=this._listeners,n=this._scopes,a=r.length;for(e=0;e<a;e++){var i=r[e];t.defined(i)&&r[e].apply(n[e],arguments)}var s=this._toRemove;if((a=s.length)>0){for(s.sort(wt),e=0;e<a;e++){var o=s[e];r.splice(o,1),n.splice(o,1)}s.length=0}this._insideRaiseEvent=!1},Object.defineProperties(gt.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){this._maximumLength=e,this._length>e&&e>0&&(this._length=e,this._array.length=e)}},comparator:{get:function(){return this._comparator}}}),gt.prototype.reserve=function(e){e=t.defaultValue(e,this._length),this._array.length=e},gt.prototype.heapify=function(e){e=t.defaultValue(e,0);for(var r=this._length,n=this._comparator,a=this._array,i=-1,s=!0;s;){var o=2*(e+1),u=o-1;i=u<r&&n(a[u],a[e])<0?u:e,o<r&&n(a[o],a[i])<0&&(i=o),i!==e?(xt(a,i,e),e=i):s=!1}},gt.prototype.resort=function(){for(var e=this._length,t=Math.ceil(e/2);t>=0;--t)this.heapify(t)},gt.prototype.insert=function(e){var r,n=this._array,a=this._comparator,i=this._maximumLength,s=this._length++;for(s<n.length?n[s]=e:n.push(e);0!==s;){var o=Math.floor((s-1)/2);if(!(a(n[s],n[o])<0))break;xt(n,s,o),s=o}return t.defined(i)&&this._length>i&&(r=n[i],this._length=i),r},gt.prototype.pop=function(e){if(e=t.defaultValue(e,0),0!==this._length){var r=this._array,n=r[e];return xt(r,e,--this._length),this.heapify(e),n}};var _t={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},Et=20,St=new gt({comparator:function(e,t){return e.priority-t.priority}});St.maximumLength=Et,St.reserve(Et);var Ot=[],Rt={},Mt="undefined"!=typeof document?new $e(document.location.href):new $e,Tt=new vt;function qt(){}function At(e){t.defined(e.priorityFunction)&&(e.priority=e.priorityFunction())}function bt(e){var r=t.defaultValue(qt.requestsByServer[e],qt.maximumRequestsPerServer);return Rt[e]<r}function Dt(e){return e.state===pt.UNISSUED&&(e.state=pt.ISSUED,e.deferred=t.when.defer()),e.deferred.promise}function It(e){var t=Dt(e);return e.state=pt.ACTIVE,Ot.push(e),++_t.numberOfActiveRequests,++_t.numberOfActiveRequestsEver,++Rt[e.serverKey],e.requestFunction().then(function(e){return function(t){e.state!==pt.CANCELLED&&(--_t.numberOfActiveRequests,--Rt[e.serverKey],Tt.raiseEvent(),e.state=pt.RECEIVED,e.deferred.resolve(t))}}(e)).otherwise(function(e){return function(t){e.state!==pt.CANCELLED&&(++_t.numberOfFailedRequests,--_t.numberOfActiveRequests,--Rt[e.serverKey],Tt.raiseEvent(t),e.state=pt.FAILED,e.deferred.reject(t))}}(e)),t}function Pt(e){var r=e.state===pt.ACTIVE;e.state=pt.CANCELLED,++_t.numberOfCancelledRequests,e.deferred.reject(),r&&(--_t.numberOfActiveRequests,--Rt[e.serverKey],++_t.numberOfCancelledActiveRequests),t.defined(e.cancelFunction)&&e.cancelFunction()}qt.maximumRequests=50,qt.maximumRequestsPerServer=6,qt.requestsByServer={"api.cesium.com:443":18,"assets.cesium.com:443":18},qt.throttleRequests=!0,qt.debugShowStatistics=!1,qt.requestCompletedEvent=Tt,Object.defineProperties(qt,{statistics:{get:function(){return _t}},priorityHeapLength:{get:function(){return Et},set:function(e){if(e<Et)for(;St.length>e;){Pt(St.pop())}Et=e,St.maximumLength=e,St.reserve(e)}}}),qt.update=function(){var e,t,r=0,n=Ot.length;for(e=0;e<n;++e)(t=Ot[e]).cancelled&&Pt(t),t.state===pt.ACTIVE?r>0&&(Ot[e-r]=t):++r;Ot.length-=r;var a=St.internalArray,i=St.length;for(e=0;e<i;++e)At(a[e]);St.resort();for(var s=Math.max(qt.maximumRequests-Ot.length,0),o=0;o<s&&St.length>0;)(t=St.pop()).cancelled?Pt(t):!t.throttleByServer||bt(t.serverKey)?(It(t),++o):Pt(t);!function(){if(!qt.debugShowStatistics)return;0===_t.numberOfActiveRequests&&_t.lastNumberOfActiveRequests>0&&(_t.numberOfAttemptedRequests>0&&(console.log("Number of attempted requests: "+_t.numberOfAttemptedRequests),_t.numberOfAttemptedRequests=0),_t.numberOfCancelledRequests>0&&(console.log("Number of cancelled requests: "+_t.numberOfCancelledRequests),_t.numberOfCancelledRequests=0),_t.numberOfCancelledActiveRequests>0&&(console.log("Number of cancelled active requests: "+_t.numberOfCancelledActiveRequests),_t.numberOfCancelledActiveRequests=0),_t.numberOfFailedRequests>0&&(console.log("Number of failed requests: "+_t.numberOfFailedRequests),_t.numberOfFailedRequests=0));_t.lastNumberOfActiveRequests=_t.numberOfActiveRequests}()},qt.getServerKey=function(e){var r=new $e(e).resolve(Mt);r.normalize();var n=r.authority;/:/.test(n)||(n=n+":"+("https"===r.scheme?"443":"80"));var a=Rt[n];return t.defined(a)||(Rt[n]=0),n},qt.request=function(e){if(ht(e.url)||ct(e.url))return Tt.raiseEvent(),e.state=pt.RECEIVED,e.requestFunction();if(++_t.numberOfAttemptedRequests,t.defined(e.serverKey)||(e.serverKey=qt.getServerKey(e.url)),!qt.throttleRequests||!e.throttleByServer||bt(e.serverKey)){if(!qt.throttleRequests||!e.throttle)return It(e);if(!(Ot.length>=qt.maximumRequests)){At(e);var r=St.insert(e);if(t.defined(r)){if(r===e)return;Pt(r)}return Dt(e)}}},qt.clearForSpecs=function(){for(;St.length>0;){Pt(St.pop())}for(var e=Ot.length,t=0;t<e;++t)Pt(Ot[t]);Ot.length=0,Rt={},_t.numberOfAttemptedRequests=0,_t.numberOfActiveRequests=0,_t.numberOfCancelledRequests=0,_t.numberOfCancelledActiveRequests=0,_t.numberOfFailedRequests=0,_t.numberOfActiveRequestsEver=0,_t.lastNumberOfActiveRequests=0},qt.numberOfActiveRequestsByServer=function(e){return Rt[e]},qt.requestHeap=St;var Ut={},Nt={};Ut.add=function(e,r){var n=e.toLowerCase()+":"+r;t.defined(Nt[n])||(Nt[n]=!0)},Ut.remove=function(e,r){var n=e.toLowerCase()+":"+r;t.defined(Nt[n])&&delete Nt[n]},Ut.contains=function(e){var r=function(e){var r=new $e(e);r.normalize();var n=r.getAuthority();if(t.defined(n)){if(-1!==n.indexOf("@")){var a=n.split("@");n=a[1]}if(-1===n.indexOf(":")){var i=r.getScheme();if(t.defined(i)||(i=(i=window.location.protocol).substring(0,i.length-1)),"http"===i)n+=":80";else{if("https"!==i)return;n+=":443"}}return n}}(e);return!(!t.defined(r)||!t.defined(Nt[r]))},Ut.clear=function(){Nt={}};var zt,Ft=function(){try{var e=new XMLHttpRequest;return e.open("GET","#",!0),e.responseType="blob","blob"===e.responseType}catch(e){return!1}}();function Vt(e,r,n,a){var i,s=e.query;if(!t.defined(s)||0===s.length)return{};if(-1===s.indexOf("=")){var o={};o[s]=void 0,i=o}else i=function(e){var r={};if(""===e)return r;for(var n=e.replace(/\+/g,"%20").split(/[&;]/),a=0,i=n.length;a<i;++a){var s=n[a].split("="),o=decodeURIComponent(s[0]),u=s[1];u=t.defined(u)?decodeURIComponent(u):"";var l=r[o];"string"==typeof l?r[o]=[l,u]:Array.isArray(l)?l.push(u):r[o]=u}return r}(s);r._queryParameters=n?kt(i,r._queryParameters,a):i,e.query=void 0}function Bt(e,r){var n=r._queryParameters,a=Object.keys(n);1!==a.length||t.defined(n[a[0]])?e.query=function(e){var t="";for(var r in e)if(e.hasOwnProperty(r)){var n=e[r],a=encodeURIComponent(r)+"=";if(Array.isArray(n))for(var i=0,s=n.length;i<s;++i)t+=a+encodeURIComponent(n[i])+"&";else t+=a+encodeURIComponent(n)+"&"}return t=t.slice(0,-1)}(n):e.query=a[0]}function Lt(e,r){return t.defined(e)?t.defined(e.clone)?e.clone():st(e):r}function jt(e){if(e.state===pt.ISSUED||e.state===pt.ACTIVE)throw new s.RuntimeError("The Resource is already being fetched.");e.state=pt.UNISSUED,e.deferred=void 0}function kt(e,r,n){if(!n)return ot(e,r);var a=st(e,!0);for(var i in r)if(r.hasOwnProperty(i)){var s=a[i],o=r[i];t.defined(s)?(Array.isArray(s)||(s=a[i]=[s]),a[i]=s.concat(o)):a[i]=Array.isArray(o)?o.slice():o}return a}function Wt(e){"string"==typeof(e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT))&&(e={url:e}),this._url=void 0,this._templateValues=Lt(e.templateValues,{}),this._queryParameters=Lt(e.queryParameters,{}),this.headers=Lt(e.headers,{}),this.request=t.defaultValue(e.request,new yt),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=t.defaultValue(e.retryAttempts,0),this._retryCount=0;var r=new $e(e.url);Vt(r,this,!0,!0),r.fragment=void 0,this._url=r.toString()}function Yt(e){var r=e.resource,n=e.flipY,a=e.preferImageBitmap,i=r.request;i.url=r.url,i.requestFunction=function(){var e=!1;r.isDataUri||r.isBlobUri||(e=r.isCrossOriginUrl);var s=t.when.defer();return Wt._Implementations.createImage(i,e,s,n,a),s.promise};var s=qt.request(i);if(t.defined(s))return s.otherwise((function(e){return i.state!==pt.FAILED?t.when.reject(e):r.retryOnError(e).then((function(s){return s?(i.state=pt.UNISSUED,i.deferred=void 0,Yt({resource:r,flipY:n,preferImageBitmap:a})):t.when.reject(e)}))}))}Wt.createIfNeeded=function(e){return e instanceof Wt?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new Wt({url:e})},Wt.supportsImageBitmapOptions=function(){if(t.defined(zt))return zt;if("function"!=typeof createImageBitmap)return zt=t.when.resolve(!1);return zt=Wt.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWP4////fwAJ+wP9CNHoHgAAAABJRU5ErkJggg=="}).then((function(e){return createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none"})})).then((function(e){return!0})).otherwise((function(){return!1}))},Object.defineProperties(Wt,{isBlobSupported:{get:function(){return Ft}}}),Object.defineProperties(Wt.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){var t=new $e(e);Vt(t,this,!1),t.fragment=void 0,this._url=t.toString()}},extension:{get:function(){return function(e){var t=new $e(e);t.normalize();var r=t.path,n=r.lastIndexOf("/");return-1!==n&&(r=r.substr(n+1)),n=r.lastIndexOf("."),r=-1===n?"":r.substr(n+1)}(this._url)}},isDataUri:{get:function(){return ht(this._url)}},isBlobUri:{get:function(){return ct(this._url)}},isCrossOriginUrl:{get:function(){return function(e){t.defined(lt)||(lt=document.createElement("a")),lt.href=window.location.href;var r=lt.host,n=lt.protocol;return lt.href=e,lt.href=lt.href,n!==lt.protocol||r!==lt.host}(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}}}),Wt.prototype.getUrlComponent=function(e,r){if(this.isDataUri)return this._url;var n=new $e(this._url);e&&Bt(n,this);var a=n.toString().replace(/%7B/g,"{").replace(/%7D/g,"}"),i=this._templateValues;return a=a.replace(/{(.*?)}/g,(function(e,r){var n=i[r];return t.defined(n)?encodeURIComponent(n):e})),r&&t.defined(this.proxy)&&(a=this.proxy.getURL(a)),a},Wt.prototype.setQueryParameters=function(e,t){this._queryParameters=t?kt(this._queryParameters,e,!1):kt(e,this._queryParameters,!1)},Wt.prototype.appendQueryParameters=function(e){this._queryParameters=kt(e,this._queryParameters,!0)},Wt.prototype.setTemplateValues=function(e,t){this._templateValues=t?ot(this._templateValues,e):ot(e,this._templateValues)},Wt.prototype.getDerivedResource=function(e){var r=this.clone();if(r._retryCount=0,t.defined(e.url)){var n=new $e(e.url);Vt(n,r,!0,t.defaultValue(e.preserveQueryParameters,!1)),n.fragment=void 0,r._url=n.resolve(new $e(ut(this._url))).toString()}return t.defined(e.queryParameters)&&(r._queryParameters=ot(e.queryParameters,r._queryParameters)),t.defined(e.templateValues)&&(r._templateValues=ot(e.templateValues,r.templateValues)),t.defined(e.headers)&&(r.headers=ot(e.headers,r.headers)),t.defined(e.proxy)&&(r.proxy=e.proxy),t.defined(e.request)&&(r.request=e.request),t.defined(e.retryCallback)&&(r.retryCallback=e.retryCallback),t.defined(e.retryAttempts)&&(r.retryAttempts=e.retryAttempts),r},Wt.prototype.retryOnError=function(e){var r=this.retryCallback;if("function"!=typeof r||this._retryCount>=this.retryAttempts)return t.when(!1);var n=this;return t.when(r(this,e)).then((function(e){return++n._retryCount,e}))},Wt.prototype.clone=function(e){return t.defined(e)||(e=new Wt({url:this._url})),e._url=this._url,e._queryParameters=st(this._queryParameters),e._templateValues=st(this._templateValues),e.headers=st(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},Wt.prototype.getBaseUri=function(e){return function(e,r){var n="",a=e.lastIndexOf("/");return-1!==a&&(n=e.substring(0,a+1)),r?(e=new $e(e),t.defined(e.query)&&(n+="?"+e.query),t.defined(e.fragment)&&(n+="#"+e.fragment),n):n}(this.getUrlComponent(e),e)},Wt.prototype.appendForwardSlash=function(){var e;this._url=(0!==(e=this._url).length&&"/"===e[e.length-1]||(e+="/"),e)},Wt.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},Wt.fetchArrayBuffer=function(e){return new Wt(e).fetchArrayBuffer()},Wt.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},Wt.fetchBlob=function(e){return new Wt(e).fetchBlob()},Wt.prototype.fetchImage=function(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT);var r=t.defaultValue(e.preferImageBitmap,!1),n=t.defaultValue(e.preferBlob,!1),a=t.defaultValue(e.flipY,!1);if(jt(this.request),!Ft||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!n)return Yt({resource:this,flipY:a,preferImageBitmap:r});var i,s,o,u=this.fetchBlob();return t.defined(u)?Wt.supportsImageBitmapOptions().then((function(e){return i=e&&r,u})).then((function(e){if(t.defined(e)){if(o=e,i)return Wt.createImageBitmapFromBlob(e,{flipY:a,premultiplyAlpha:!1});var r=window.URL.createObjectURL(e);return Yt({resource:s=new Wt({url:r}),flipY:a,preferImageBitmap:!1})}})).then((function(e){if(t.defined(e))return e.blob=o,i||window.URL.revokeObjectURL(s.url),e})).otherwise((function(e){return t.defined(s)&&window.URL.revokeObjectURL(s.url),e.blob=o,t.when.reject(e)})):void 0},Wt.fetchImage=function(e){return new Wt(e).fetchImage({flipY:e.flipY,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},Wt.prototype.fetchText=function(){return this.fetch({responseType:"text"})},Wt.fetchText=function(e){return new Wt(e).fetchText()},Wt.prototype.fetchJson=function(){var e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(t.defined(e))return e.then((function(e){if(t.defined(e))return JSON.parse(e)}))},Wt.fetchJson=function(e){return new Wt(e).fetchJson()},Wt.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},Wt.fetchXML=function(e){return new Wt(e).fetchXML()},Wt.prototype.fetchJsonp=function(e){var r;e=t.defaultValue(e,"callback"),jt(this.request);do{r="loadJsonp"+Math.random().toString().substring(2,8)}while(t.defined(window[r]));return function e(r,n,a){var i={};i[n]=a,r.setQueryParameters(i);var s=r.request;s.url=r.url,s.requestFunction=function(){var e=t.when.defer();return window[a]=function(t){e.resolve(t);try{delete window[a]}catch(e){window[a]=void 0}},Wt._Implementations.loadAndExecuteScript(r.url,a,e),e.promise};var o=qt.request(s);if(!t.defined(o))return;return o.otherwise((function(i){return s.state!==pt.FAILED?t.when.reject(i):r.retryOnError(i).then((function(o){return o?(s.state=pt.UNISSUED,s.deferred=void 0,e(r,n,a)):t.when.reject(i)}))}))}(this,e,r)},Wt.fetchJsonp=function(e){return new Wt(e).fetchJsonp(e.callbackParameterName)},Wt.prototype._makeRequest=function(e){var r=this;jt(r.request);var n=r.request;n.url=r.url,n.requestFunction=function(){var a=e.responseType,i=ot(e.headers,r.headers),s=e.overrideMimeType,o=e.method,u=e.data,l=t.when.defer(),d=Wt._Implementations.loadWithXhr(r.url,a,o,u,i,l,s);return t.defined(d)&&t.defined(d.abort)&&(n.cancelFunction=function(){d.abort()}),l.promise};var a=qt.request(n);if(t.defined(a))return a.then((function(e){return e})).otherwise((function(a){return n.state!==pt.FAILED?t.when.reject(a):r.retryOnError(a).then((function(i){return i?(n.state=pt.UNISSUED,n.deferred=void 0,r.fetch(e)):t.when.reject(a)}))}))};var Ht=/^data:(.*?)(;base64)?,(.*)$/;function Xt(e,t){var r=decodeURIComponent(t);return e?atob(r):r}function Jt(e,t){for(var r=Xt(e,t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return n}function Zt(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}Wt.prototype.fetch=function(e){return(e=Lt(e,{})).method="GET",this._makeRequest(e)},Wt.fetch=function(e){return new Wt(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Wt.prototype.delete=function(e){return(e=Lt(e,{})).method="DELETE",this._makeRequest(e)},Wt.delete=function(e){return new Wt(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},Wt.prototype.head=function(e){return(e=Lt(e,{})).method="HEAD",this._makeRequest(e)},Wt.head=function(e){return new Wt(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Wt.prototype.options=function(e){return(e=Lt(e,{})).method="OPTIONS",this._makeRequest(e)},Wt.options=function(e){return new Wt(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Wt.prototype.post=function(e,t){return r.Check.defined("data",e),(t=Lt(t,{})).method="POST",t.data=e,this._makeRequest(t)},Wt.post=function(e){return new Wt(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Wt.prototype.put=function(e,t){return r.Check.defined("data",e),(t=Lt(t,{})).method="PUT",t.data=e,this._makeRequest(t)},Wt.put=function(e){return new Wt(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Wt.prototype.patch=function(e,t){return r.Check.defined("data",e),(t=Lt(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},Wt.patch=function(e){return new Wt(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Wt._Implementations={},Wt._Implementations.createImage=function(e,r,n,a,i){var o=e.url;Wt.supportsImageBitmapOptions().then((function(u){if(u&&i){var l=t.when.defer(),d=Wt._Implementations.loadWithXhr(o,"blob","GET",void 0,void 0,l,void 0,void 0,void 0);return t.defined(d)&&t.defined(d.abort)&&(e.cancelFunction=function(){d.abort()}),l.promise.then((function(e){if(t.defined(e))return Wt.createImageBitmapFromBlob(e,{flipY:a,premultiplyAlpha:!1});n.reject(new s.RuntimeError("Successfully retrieved "+o+" but it contained no content."))})).then(n.resolve)}!function(e,t,r){var n=new Image;n.onload=function(){r.resolve(n)},n.onerror=function(e){r.reject(e)},t&&(Ut.contains(e)?n.crossOrigin="use-credentials":n.crossOrigin=""),n.src=e}(o,r,n)})).otherwise(n.reject)},Wt.createImageBitmapFromBlob=function(e,t){return r.Check.defined("options",t),r.Check.typeOf.bool("options.flipY",t.flipY),r.Check.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none"})};var Gt="undefined"==typeof XMLHttpRequest;function Kt(e){if(e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=t.defaultValue(e.addNewLeapSeconds,!0),t.defined(e.data))$t(this,e.data);else if(t.defined(e.url)){var r=Wt.createIfNeeded(e.url),n=this;this._downloadPromise=t.when(r.fetchJson(),(function(e){$t(n,e)}),(function(){n._dataError="An error occurred while retrieving the EOP data from the URL "+r.url+"."}))}else $t(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function Qt(e,t){return Ke.compare(e.julianDate,t)}function $t(e,r){if(t.defined(r.columnNames))if(t.defined(r.samples)){var n=r.columnNames.indexOf("modifiedJulianDateUtc"),a=r.columnNames.indexOf("xPoleWanderRadians"),i=r.columnNames.indexOf("yPoleWanderRadians"),s=r.columnNames.indexOf("ut1MinusUtcSeconds"),o=r.columnNames.indexOf("xCelestialPoleOffsetRadians"),u=r.columnNames.indexOf("yCelestialPoleOffsetRadians"),l=r.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||a<0||i<0||s<0||o<0||u<0||l<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var d,c=e._samples=r.samples,f=e._dates=[];e._dateColumn=n,e._xPoleWanderRadiansColumn=a,e._yPoleWanderRadiansColumn=i,e._ut1MinusUtcSecondsColumn=s,e._xCelestialPoleOffsetRadiansColumn=o,e._yCelestialPoleOffsetRadiansColumn=u,e._taiMinusUtcSecondsColumn=l,e._columnCount=r.columnNames.length,e._lastIndex=void 0;for(var h=e._addNewLeapSeconds,p=0,m=c.length;p<m;p+=e._columnCount){var y=c[p+n],C=c[p+l],v=new Ke(y+De.MODIFIED_JULIAN_DATE_DIFFERENCE,C,Ie.TAI);if(f.push(v),h){if(C!==d&&t.defined(d)){var w=Ke.leapSeconds,g=Re(w,v,Qt);if(g<0){var x=new be(v,C);w.splice(~g,0,x)}}d=C}}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function er(e,t,r,n,a){var i=r*n;a.xPoleWander=t[i+e._xPoleWanderRadiansColumn],a.yPoleWander=t[i+e._yPoleWanderRadiansColumn],a.xPoleOffset=t[i+e._xCelestialPoleOffsetRadiansColumn],a.yPoleOffset=t[i+e._yCelestialPoleOffsetRadiansColumn],a.ut1MinusUtc=t[i+e._ut1MinusUtcSecondsColumn]}function tr(e,t,r){return t+e*(r-t)}function rr(e,t,r,n,a,i,s){var o=e._columnCount;if(i>t.length-1)return s.xPoleWander=0,s.yPoleWander=0,s.xPoleOffset=0,s.yPoleOffset=0,s.ut1MinusUtc=0,s;var u=t[a],l=t[i];if(u.equals(l)||n.equals(u))return er(e,r,a,o,s),s;if(n.equals(l))return er(e,r,i,o,s),s;var d=Ke.secondsDifference(n,u)/Ke.secondsDifference(l,u),c=a*o,f=i*o,h=r[c+e._ut1MinusUtcSecondsColumn],p=r[f+e._ut1MinusUtcSecondsColumn],m=p-h;if(m>.5||m<-.5){var y=r[c+e._taiMinusUtcSecondsColumn],C=r[f+e._taiMinusUtcSecondsColumn];y!==C&&(l.equals(n)?h=p:p-=C-y)}return s.xPoleWander=tr(d,r[c+e._xPoleWanderRadiansColumn],r[f+e._xPoleWanderRadiansColumn]),s.yPoleWander=tr(d,r[c+e._yPoleWanderRadiansColumn],r[f+e._yPoleWanderRadiansColumn]),s.xPoleOffset=tr(d,r[c+e._xCelestialPoleOffsetRadiansColumn],r[f+e._xCelestialPoleOffsetRadiansColumn]),s.yPoleOffset=tr(d,r[c+e._yCelestialPoleOffsetRadiansColumn],r[f+e._yCelestialPoleOffsetRadiansColumn]),s.ut1MinusUtc=tr(d,h,p),s}function nr(e,r,n){this.heading=t.defaultValue(e,0),this.pitch=t.defaultValue(r,0),this.roll=t.defaultValue(n,0)}Wt._Implementations.loadWithXhr=function(e,r,n,a,i,o,u){var l=Ht.exec(e);if(null===l){if(!Gt){var d=new XMLHttpRequest;if(Ut.contains(e)&&(d.withCredentials=!0),d.open(n,e,!0),t.defined(u)&&t.defined(d.overrideMimeType)&&d.overrideMimeType(u),t.defined(i))for(var c in i)i.hasOwnProperty(c)&&d.setRequestHeader(c,i[c]);t.defined(r)&&(d.responseType=r);var f=!1;return"string"==typeof e&&(f=0===e.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),d.onload=function(){if(!(d.status<200||d.status>=300)||f&&0===d.status){var e=d.response,a=d.responseType;if("HEAD"===n||"OPTIONS"===n){var i=d.getAllResponseHeaders().trim().split(/[\r\n]+/),u={};return i.forEach((function(e){var t=e.split(": "),r=t.shift();u[r]=t.join(": ")})),void o.resolve(u)}if(204===d.status)o.resolve();else if(!t.defined(e)||t.defined(r)&&a!==r)if("json"===r&&"string"==typeof e)try{o.resolve(JSON.parse(e))}catch(e){o.reject(e)}else(""===a||"document"===a)&&t.defined(d.responseXML)&&d.responseXML.hasChildNodes()?o.resolve(d.responseXML):""!==a&&"text"!==a||!t.defined(d.responseText)?o.reject(new s.RuntimeError("Invalid XMLHttpRequest response type.")):o.resolve(d.responseText);else o.resolve(e)}else o.reject(new Ct(d.status,d.response,d.getAllResponseHeaders()))},d.onerror=function(e){o.reject(new Ct)},d.send(a),d}!function(e,t,r,n,a,i,o){var u=require("url").parse(e),l="https:"===u.protocol?require("https"):require("http"),d=require("zlib"),c={protocol:u.protocol,hostname:u.hostname,port:u.port,path:u.path,query:u.query,method:r,headers:a};l.request(c).on("response",(function(e){if(e.statusCode<200||e.statusCode>=300)i.reject(new Ct(e.statusCode,e,e.headers));else{var r=[];e.on("data",(function(e){r.push(e)})),e.on("end",(function(){var n=Buffer.concat(r);"gzip"===e.headers["content-encoding"]?d.gunzip(n,(function(e,r){e?i.reject(new s.RuntimeError("Error decompressing response.")):i.resolve(Zt(r,t))})):i.resolve(Zt(n,t))}))}})).on("error",(function(e){i.reject(new Ct)})).end()}(e,r,n,0,i,o)}else o.resolve(function(e,r){r=t.defaultValue(r,"");var n=e[1],a=!!e[2],i=e[3];switch(r){case"":case"text":return Xt(a,i);case"arraybuffer":return Jt(a,i);case"blob":var s=Jt(a,i);return new Blob([s],{type:n});case"document":return(new DOMParser).parseFromString(Xt(a,i),n);case"json":return JSON.parse(Xt(a,i))}}(l,r))},Wt._Implementations.loadAndExecuteScript=function(e,r,n){return function(e){var r=t.when.defer(),n=document.createElement("script");n.async=!0,n.src=e;var a=document.getElementsByTagName("head")[0];return n.onload=function(){n.onload=void 0,a.removeChild(n),r.resolve()},n.onerror=function(e){r.reject(e)},a.appendChild(n),r.promise}(e).otherwise(n.reject)},Wt._DefaultImplementations={},Wt._DefaultImplementations.createImage=Wt._Implementations.createImage,Wt._DefaultImplementations.loadWithXhr=Wt._Implementations.loadWithXhr,Wt._DefaultImplementations.loadAndExecuteScript=Wt._Implementations.loadAndExecuteScript,Wt.DEFAULT=Object.freeze(new Wt({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),Kt.NONE=Object.freeze({getPromiseToLoad:function(){return t.when()},compute:function(e,r){return t.defined(r)?(r.xPoleWander=0,r.yPoleWander=0,r.xPoleOffset=0,r.yPoleOffset=0,r.ut1MinusUtc=0):r=new Me(0,0,0,0,0),r}}),Kt.prototype.getPromiseToLoad=function(){return t.when(this._downloadPromise)},Kt.prototype.compute=function(e,r){if(t.defined(this._samples)){if(t.defined(r)||(r=new Me(0,0,0,0,0)),0===this._samples.length)return r.xPoleWander=0,r.yPoleWander=0,r.xPoleOffset=0,r.yPoleOffset=0,r.ut1MinusUtc=0,r;var n=this._dates,a=this._lastIndex,i=0,o=0;if(t.defined(a)){var u=n[a],l=n[a+1],d=Ke.lessThanOrEquals(u,e),c=!t.defined(l),f=c||Ke.greaterThanOrEquals(l,e);if(d&&f)return i=a,!c&&l.equals(e)&&++i,o=i+1,rr(this,n,this._samples,e,i,o,r),r}var h=Re(n,e,Ke.compare,this._dateColumn);return h>=0?(h<n.length-1&&n[h+1].equals(e)&&++h,i=h,o=h):(i=(o=~h)-1)<0&&(i=0),this._lastIndex=i,rr(this,n,this._samples,e,i,o,r),r}if(t.defined(this._dataError))throw new s.RuntimeError(this._dataError)},nr.fromQuaternion=function(e,r){t.defined(r)||(r=new nr);var a=2*(e.w*e.y-e.z*e.x),i=1-2*(e.x*e.x+e.y*e.y),s=2*(e.w*e.x+e.y*e.z),o=1-2*(e.y*e.y+e.z*e.z),u=2*(e.w*e.z+e.x*e.y);return r.heading=-Math.atan2(u,o),r.roll=Math.atan2(s,i),r.pitch=-n.CesiumMath.asinClamped(a),r},nr.fromDegrees=function(e,r,a,i){return t.defined(i)||(i=new nr),i.heading=e*n.CesiumMath.RADIANS_PER_DEGREE,i.pitch=r*n.CesiumMath.RADIANS_PER_DEGREE,i.roll=a*n.CesiumMath.RADIANS_PER_DEGREE,i},nr.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r.heading=e.heading,r.pitch=e.pitch,r.roll=e.roll,r):new nr(e.heading,e.pitch,e.roll)},nr.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&e.heading===r.heading&&e.pitch===r.pitch&&e.roll===r.roll},nr.equalsEpsilon=function(e,r,a,i){return e===r||t.defined(e)&&t.defined(r)&&n.CesiumMath.equalsEpsilon(e.heading,r.heading,a,i)&&n.CesiumMath.equalsEpsilon(e.pitch,r.pitch,a,i)&&n.CesiumMath.equalsEpsilon(e.roll,r.roll,a,i)},nr.prototype.clone=function(e){return nr.clone(this,e)},nr.prototype.equals=function(e){return nr.equals(this,e)},nr.prototype.equalsEpsilon=function(e,t,r){return nr.equalsEpsilon(this,e,t,r)},nr.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var ar,ir,sr,or=/((?:.*\/)|^)Cesium\.js$/;function ur(e){return"undefined"==typeof document?e:(t.defined(ar)||(ar=document.createElement("a")),ar.href=e,ar.href=ar.href,ar.href)}function lr(){return t.defined(ir)||(e="undefined"!=typeof CESIUM_BASE_URL?CESIUM_BASE_URL:"object"==typeof define&&t.defined(define.amd)&&!define.amd.toUrlUndefined&&t.defined(require.toUrl)?ut("..",fr("Core/buildModuleUrl.js")):function(){for(var e=document.getElementsByTagName("script"),t=0,r=e.length;t<r;++t){var n=e[t].getAttribute("src"),a=or.exec(n);if(null!==a)return a[1]}}(),(ir=new Wt({url:ur(e)})).appendForwardSlash()),ir;var e}function dr(e){return ur(require.toUrl("../"+e))}function cr(e){return lr().getDerivedResource({url:e}).url}function fr(e){return t.defined(sr)||(sr="object"==typeof define&&t.defined(define.amd)&&!define.amd.toUrlUndefined&&t.defined(require.toUrl)?dr:cr),sr(e)}function hr(e,t,r){this.x=e,this.y=t,this.s=r}function pr(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT),this._xysFileUrlTemplate=Wt.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=t.defaultValue(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=t.defaultValue(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new Ke(this._sampleZeroJulianEphemerisDate,0,Ie.TAI),this._stepSizeDays=t.defaultValue(e.stepSizeDays,1),this._samplesPerXysFile=t.defaultValue(e.samplesPerXysFile,1e3),this._totalSamples=t.defaultValue(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var r=this._interpolationOrder,n=this._denominators=new Array(r+1),a=this._xTable=new Array(r+1),i=Math.pow(this._stepSizeDays,r),s=0;s<=r;++s){n[s]=i,a[s]=s*this._stepSizeDays;for(var o=0;o<=r;++o)o!==s&&(n[s]*=s-o);n[s]=1/n[s]}this._work=new Array(r+1),this._coef=new Array(r+1)}fr._cesiumScriptRegex=or,fr._buildModuleUrlFromBaseUrl=cr,fr._clearBaseResource=function(){ir=void 0},fr.setBaseUrl=function(e){ir=Wt.DEFAULT.getDerivedResource({url:e})},fr.getCesiumBaseUrl=lr;var mr=new Ke(0,0,Ie.TAI);function yr(e,t,r){var n=mr;return n.dayNumber=t,n.secondsOfDay=r,Ke.daysDifference(n,e._sampleZeroDateTT)}function Cr(e,r){if(e._chunkDownloadsInProgress[r])return e._chunkDownloadsInProgress[r];var n,a=t.when.defer();e._chunkDownloadsInProgress[r]=a;var i=e._xysFileUrlTemplate;return n=t.defined(i)?i.getDerivedResource({templateValues:{0:r}}):new Wt({url:fr("Assets/IAU2006_XYS/IAU2006_XYS_"+r+".json")}),t.when(n.fetchJson(),(function(t){e._chunkDownloadsInProgress[r]=!1;for(var n=e._samples,i=t.samples,s=r*e._samplesPerXysFile*3,o=0,u=i.length;o<u;++o)n[s+o]=i[o];a.resolve()})),a.promise}pr.prototype.preload=function(e,r,n,a){var i=yr(this,e,r),s=yr(this,n,a),o=i/this._stepSizeDays-this._interpolationOrder/2|0;o<0&&(o=0);var u=s/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;u>=this._totalSamples&&(u=this._totalSamples-1);for(var l=o/this._samplesPerXysFile|0,d=u/this._samplesPerXysFile|0,c=[],f=l;f<=d;++f)c.push(Cr(this,f));return t.when.all(c)},pr.prototype.computeXysRadians=function(e,r,n){var a=yr(this,e,r);if(!(a<0)){var i=a/this._stepSizeDays|0;if(!(i>=this._totalSamples)){var s=this._interpolationOrder,o=i-(s/2|0);o<0&&(o=0);var u=o+s;u>=this._totalSamples&&(o=(u=this._totalSamples-1)-s)<0&&(o=0);var l=!1,d=this._samples;if(t.defined(d[3*o])||(Cr(this,o/this._samplesPerXysFile|0),l=!0),t.defined(d[3*u])||(Cr(this,u/this._samplesPerXysFile|0),l=!0),!l){t.defined(n)?(n.x=0,n.y=0,n.s=0):n=new hr(0,0,0);var c,f,h=a-o*this._stepSizeDays,p=this._work,m=this._denominators,y=this._coef,C=this._xTable;for(c=0;c<=s;++c)p[c]=h-C[c];for(c=0;c<=s;++c){for(y[c]=1,f=0;f<=s;++f)f!==c&&(y[c]*=p[f]);y[c]*=m[c];var v=3*(o+c);n.x+=y[c]*d[v++],n.y+=y[c]*d[v++],n.s+=y[c]*d[v]}return n}}}};var vr={},wr={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},gr={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},xr={},_r={east:new n.Cartesian3,north:new n.Cartesian3,up:new n.Cartesian3,west:new n.Cartesian3,south:new n.Cartesian3,down:new n.Cartesian3},Er=new n.Cartesian3,Sr=new n.Cartesian3,Or=new n.Cartesian3;vr.localFrameToFixedFrameGenerator=function(e,s){if(!wr.hasOwnProperty(e)||!wr[e].hasOwnProperty(s))throw new r.DeveloperError("firstAxis and secondAxis must be east, north, up, west, south or down.");var o,l=wr[e][s],d=e+s;return t.defined(xr[d])?o=xr[d]:(o=function(r,o,d){if(t.defined(d)||(d=new i.Matrix4),n.Cartesian3.equalsEpsilon(r,n.Cartesian3.ZERO,n.CesiumMath.EPSILON14))n.Cartesian3.unpack(gr[e],0,Er),n.Cartesian3.unpack(gr[s],0,Sr),n.Cartesian3.unpack(gr[l],0,Or);else if(n.CesiumMath.equalsEpsilon(r.x,0,n.CesiumMath.EPSILON14)&&n.CesiumMath.equalsEpsilon(r.y,0,n.CesiumMath.EPSILON14)){var c=n.CesiumMath.sign(r.z);n.Cartesian3.unpack(gr[e],0,Er),"east"!==e&&"west"!==e&&n.Cartesian3.multiplyByScalar(Er,c,Er),n.Cartesian3.unpack(gr[s],0,Sr),"east"!==s&&"west"!==s&&n.Cartesian3.multiplyByScalar(Sr,c,Sr),n.Cartesian3.unpack(gr[l],0,Or),"east"!==l&&"west"!==l&&n.Cartesian3.multiplyByScalar(Or,c,Or)}else{(o=t.defaultValue(o,a.Ellipsoid.WGS84)).geodeticSurfaceNormal(r,_r.up);var f=_r.up,h=_r.east;h.x=-r.y,h.y=r.x,h.z=0,n.Cartesian3.normalize(h,_r.east),n.Cartesian3.cross(f,h,_r.north),n.Cartesian3.multiplyByScalar(_r.up,-1,_r.down),n.Cartesian3.multiplyByScalar(_r.east,-1,_r.west),n.Cartesian3.multiplyByScalar(_r.north,-1,_r.south),Er=_r[e],Sr=_r[s],Or=_r[l]}return d[0]=Er.x,d[1]=Er.y,d[2]=Er.z,d[3]=0,d[4]=Sr.x,d[5]=Sr.y,d[6]=Sr.z,d[7]=0,d[8]=Or.x,d[9]=Or.y,d[10]=Or.z,d[11]=0,d[12]=r.x,d[13]=r.y,d[14]=r.z,d[15]=1,u.EnvironmentVariables.isPlaneMode?i.Matrix4.fromTranslation(r,d):d},xr[d]=o),o},vr.eastNorthUpToFixedFrame=vr.localFrameToFixedFrameGenerator("east","north"),vr.northEastDownToFixedFrame=vr.localFrameToFixedFrameGenerator("north","east"),vr.northUpEastToFixedFrame=vr.localFrameToFixedFrameGenerator("north","up"),vr.northWestUpToFixedFrame=vr.localFrameToFixedFrameGenerator("north","west");var Rr=new G,Mr=new n.Cartesian3(1,1,1),Tr=new i.Matrix4;vr.headingPitchRollToFixedFrame=function(e,r,a,s,o){s=t.defaultValue(s,vr.eastNorthUpToFixedFrame);var u=G.fromHeadingPitchRoll(r,Rr),l=i.Matrix4.fromTranslationQuaternionRotationScale(n.Cartesian3.ZERO,u,Mr,Tr);return o=s(e,a,o),i.Matrix4.multiply(o,l,o)};var qr=new i.Matrix4,Ar=new i.Matrix3;vr.headingPitchRollQuaternion=function(e,t,r,n,a){var s=vr.headingPitchRollToFixedFrame(e,t,r,n,qr),o=i.Matrix4.getMatrix3(s,Ar);return G.fromRotationMatrix(o,a)};var br=new n.Cartesian3(1,1,1),Dr=new n.Cartesian3,Ir=new i.Matrix4,Pr=new i.Matrix4,Ur=new i.Matrix3,Nr=new G;vr.fixedFrameToHeadingPitchRoll=function(e,r,s,o){r=t.defaultValue(r,a.Ellipsoid.WGS84),s=t.defaultValue(s,vr.eastNorthUpToFixedFrame),t.defined(o)||(o=new nr);var u=i.Matrix4.getTranslation(e,Dr);if(n.Cartesian3.equals(u,n.Cartesian3.ZERO))return o.heading=0,o.pitch=0,o.roll=0,o;var l=i.Matrix4.inverseTransformation(s(u,r,Ir),Ir),d=i.Matrix4.setScale(e,br,Pr);d=i.Matrix4.setTranslation(d,n.Cartesian3.ZERO,d),l=i.Matrix4.multiply(l,d,l);var c=G.fromRotationMatrix(i.Matrix4.getMatrix3(l,Ur),Nr);return c=G.normalize(c,c),nr.fromQuaternion(c,o)};var zr=n.CesiumMath.TWO_PI/86400,Fr=new Ke;vr.computeTemeToPseudoFixedMatrix=function(e,r){var a,s=(Fr=Ke.addSeconds(e,-Ke.computeTaiMinusUtc(e),Fr)).dayNumber,o=Fr.secondsOfDay,u=s-2451545,l=(24110.54841+(a=o>=43200?(u+.5)/De.DAYS_PER_JULIAN_CENTURY:(u-.5)/De.DAYS_PER_JULIAN_CENTURY)*(8640184.812866+a*(.093104+-62e-7*a)))*zr%n.CesiumMath.TWO_PI+(72921158553e-15+11772758384668e-32*(s-2451545.5))*((o+.5*De.SECONDS_PER_DAY)%De.SECONDS_PER_DAY),d=Math.cos(l),c=Math.sin(l);return t.defined(r)?(r[0]=d,r[1]=-c,r[2]=0,r[3]=c,r[4]=d,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r):new i.Matrix3(d,c,0,-c,d,0,0,0,1)},vr.iau2006XysData=new pr,vr.earthOrientationParameters=Kt.NONE;vr.preloadIcrfFixed=function(e){var r=e.start.dayNumber,n=e.start.secondsOfDay+32.184,a=e.stop.dayNumber,i=e.stop.secondsOfDay+32.184,s=vr.iau2006XysData.preload(r,n,a,i),o=vr.earthOrientationParameters.getPromiseToLoad();return t.when.all([s,o])},vr.computeIcrfToFixedMatrix=function(e,r){t.defined(r)||(r=new i.Matrix3);var n=vr.computeFixedToIcrfMatrix(e,r);if(t.defined(n))return i.Matrix3.transpose(n,r)};var Vr=new hr(0,0,0),Br=new Me(0,0,0,0,0,0),Lr=new i.Matrix3,jr=new i.Matrix3;vr.computeFixedToIcrfMatrix=function(e,r){t.defined(r)||(r=new i.Matrix3);var a=vr.earthOrientationParameters.compute(e,Br);if(t.defined(a)){var s=e.dayNumber,o=e.secondsOfDay+32.184,u=vr.iau2006XysData.computeXysRadians(s,o,Vr);if(t.defined(u)){var l=u.x+a.xPoleOffset,d=u.y+a.yPoleOffset,c=1/(1+Math.sqrt(1-l*l-d*d)),f=Lr;f[0]=1-c*l*l,f[3]=-c*l*d,f[6]=l,f[1]=-c*l*d,f[4]=1-c*d*d,f[7]=d,f[2]=-l,f[5]=-d,f[8]=1-c*(l*l+d*d);var h=i.Matrix3.fromRotationZ(-u.s,jr),p=i.Matrix3.multiply(f,h,Lr),m=e.dayNumber-2451545,y=(e.secondsOfDay-Ke.computeTaiMinusUtc(e)+a.ut1MinusUtc)/De.SECONDS_PER_DAY,C=.779057273264+y+.00273781191135448*(m+y);C=C%1*n.CesiumMath.TWO_PI;var v=i.Matrix3.fromRotationZ(C,jr),w=i.Matrix3.multiply(p,v,Lr),g=Math.cos(a.xPoleWander),x=Math.cos(a.yPoleWander),_=Math.sin(a.xPoleWander),E=Math.sin(a.yPoleWander),S=s-2451545+o/De.SECONDS_PER_DAY,O=-47e-6*(S/=36525)*n.CesiumMath.RADIANS_PER_DEGREE/3600,R=Math.cos(O),M=Math.sin(O),T=jr;return T[0]=g*R,T[1]=g*M,T[2]=_,T[3]=-x*M+E*_*R,T[4]=x*R+E*_*M,T[5]=-E*g,T[6]=-E*M-x*_*R,T[7]=E*R-x*_*M,T[8]=x*g,i.Matrix3.multiply(w,T,r)}}};var kr=new i.Cartesian4;vr.pointToWindowCoordinates=function(e,t,r,n){return(n=vr.pointToGLWindowCoordinates(e,t,r,n)).y=2*t[5]-n.y,n},vr.pointToGLWindowCoordinates=function(e,r,n,a){t.defined(a)||(a=new o.Cartesian2);var s=kr;return i.Matrix4.multiplyByVector(e,i.Cartesian4.fromElements(n.x,n.y,n.z,1,s),s),i.Cartesian4.multiplyByScalar(s,1/s.w,s),i.Matrix4.multiplyByVector(r,s,s),o.Cartesian2.fromCartesian4(s,a)};var Wr=new n.Cartesian3,Yr=new n.Cartesian3,Hr=new n.Cartesian3;vr.rotationMatrixFromPositionVelocity=function(e,r,s,o){var u=t.defaultValue(s,a.Ellipsoid.WGS84).geodeticSurfaceNormal(e,Wr),l=n.Cartesian3.cross(r,u,Yr);n.Cartesian3.equalsEpsilon(l,n.Cartesian3.ZERO,n.CesiumMath.EPSILON6)&&(l=n.Cartesian3.clone(n.Cartesian3.UNIT_X,l));var d=n.Cartesian3.cross(l,r,Hr);return n.Cartesian3.normalize(d,d),n.Cartesian3.cross(r,d,l),n.Cartesian3.negate(l,l),n.Cartesian3.normalize(l,l),t.defined(o)||(o=new i.Matrix3),o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=l.x,o[4]=l.y,o[5]=l.z,o[6]=d.x,o[7]=d.y,o[8]=d.z,o};var Xr=new i.Matrix4(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),Jr=new a.Cartographic,Zr=new n.Cartesian3,Gr=new n.Cartesian3,Kr=new i.Matrix3,Qr=new i.Matrix4,$r=new i.Matrix4;vr.basisTo2D=function(e,t,r){var a=i.Matrix4.getTranslation(t,Gr),s=e.ellipsoid,o=s.cartesianToCartographic(a,Jr),u=e.project(o,Zr);n.Cartesian3.fromElements(u.z,u.x,u.y,u);var l=vr.eastNorthUpToFixedFrame(a,s,Qr),d=i.Matrix4.inverseTransformation(l,$r),c=i.Matrix4.getMatrix3(t,Kr),f=i.Matrix4.multiplyByMatrix3(d,c,r);return i.Matrix4.multiply(Xr,f,r),i.Matrix4.setTranslation(r,u,r),r},vr.wgs84To2DModelMatrix=function(e,t,r){var a=e.ellipsoid,s=vr.eastNorthUpToFixedFrame(t,a,Qr),o=i.Matrix4.inverseTransformation(s,$r),u=a.cartesianToCartographic(t,Jr),l=e.project(u,Zr);n.Cartesian3.fromElements(l.z,l.x,l.y,l);var d=i.Matrix4.fromTranslation(l,Qr);return i.Matrix4.multiply(Xr,o,r),i.Matrix4.multiply(d,r,r),r},e.BoundingSphere=f,e.GeographicProjection=l,e.Intersect=d,e.Interval=c,e.Quaternion=G,e.Resource=Wt,e.Transforms=vr,e.buildModuleUrl=fr}));
