define(["exports","./Cartesian3-ca5d3f12","./Transforms-7a1c9ee7","./Matrix4-027dd006"],(function(a,r,e,i){"use strict";var t={},n=new r.Cartesian3,s=new r.Cartesian3,o=new e.Quaternion,l=new i.Matrix3;function C(a,t,C,y,u,m,c,h,x,M){var f=a+t;r.Cartesian3.multiplyByScalar(y,Math.cos(f),n),r.Cartesian3.multiplyByScalar(C,Math.sin(f),s),r.Cartesian3.add(n,s,n);var z=Math.cos(a);z*=z;var d=Math.sin(a);d*=d;var _=m/Math.sqrt(c*z+u*d)/h;return e.Quaternion.fromAxisAngle(n,_,o),i.Matrix3.fromQuaternion(o,l),i.Matrix3.multiplyByVector(l,x,M),r.Cartesian3.normalize(M,M),r.Cartesian3.multiplyByScalar(M,h,M),M}var y=new r.Cartesian3,u=new r.Cartesian3,m=new r.Cartesian3,c=new r.Cartesian3;t.raisePositionsToHeight=function(a,e,i){for(var t=e.ellipsoid,n=e.height,s=e.extrudedHeight,o=i?a.length/3*2:a.length/3,l=new Float64Array(3*o),C=a.length,h=i?C:0,x=0;x<C;x+=3){var M=x+1,f=x+2,z=r.Cartesian3.fromArray(a,x,y);t.scaleToGeodeticSurface(z,z);var d=r.Cartesian3.clone(z,u),_=t.geodeticSurfaceNormal(z,c),v=r.Cartesian3.multiplyByScalar(_,n,m);r.Cartesian3.add(z,v,z),i&&(r.Cartesian3.multiplyByScalar(_,s,v),r.Cartesian3.add(d,v,d),l[x+h]=d.x,l[M+h]=d.y,l[f+h]=d.z),l[x]=z.x,l[M]=z.y,l[f]=z.z}return l};var h=new r.Cartesian3,x=new r.Cartesian3,M=new r.Cartesian3;t.computeEllipsePositions=function(a,e,i){var t=a.semiMinorAxis,n=a.semiMajorAxis,s=a.rotation,o=a.center,l=8*a.granularity,c=t*t,f=n*n,z=n*t,d=r.Cartesian3.magnitude(o),_=r.Cartesian3.normalize(o,h),v=r.Cartesian3.cross(r.Cartesian3.UNIT_Z,o,x);v=r.Cartesian3.normalize(v,v);var O=r.Cartesian3.cross(_,v,M),p=1+Math.ceil(r.CesiumMath.PI_OVER_TWO/l),w=r.CesiumMath.PI_OVER_TWO/(p-1),P=r.CesiumMath.PI_OVER_TWO-p*w;P<0&&(p-=Math.ceil(Math.abs(P)/w));var T,I,g,E,V,A=e?new Array(3*(p*(p+2)*2)):void 0,R=0,W=y,S=u,B=4*p*3,Q=B-1,b=0,G=i?new Array(B):void 0;for(W=C(P=r.CesiumMath.PI_OVER_TWO,s,O,v,c,z,f,d,_,W),e&&(A[R++]=W.x,A[R++]=W.y,A[R++]=W.z),i&&(G[Q--]=W.z,G[Q--]=W.y,G[Q--]=W.x),P=r.CesiumMath.PI_OVER_TWO-w,T=1;T<p+1;++T){if(W=C(P,s,O,v,c,z,f,d,_,W),S=C(Math.PI-P,s,O,v,c,z,f,d,_,S),e){for(A[R++]=W.x,A[R++]=W.y,A[R++]=W.z,g=2*T+2,I=1;I<g-1;++I)E=I/(g-1),V=r.Cartesian3.lerp(W,S,E,m),A[R++]=V.x,A[R++]=V.y,A[R++]=V.z;A[R++]=S.x,A[R++]=S.y,A[R++]=S.z}i&&(G[Q--]=W.z,G[Q--]=W.y,G[Q--]=W.x,G[b++]=S.x,G[b++]=S.y,G[b++]=S.z),P=r.CesiumMath.PI_OVER_TWO-(T+1)*w}for(T=p;T>1;--T){if(W=C(-(P=r.CesiumMath.PI_OVER_TWO-(T-1)*w),s,O,v,c,z,f,d,_,W),S=C(P+Math.PI,s,O,v,c,z,f,d,_,S),e){for(A[R++]=W.x,A[R++]=W.y,A[R++]=W.z,g=2*(T-1)+2,I=1;I<g-1;++I)E=I/(g-1),V=r.Cartesian3.lerp(W,S,E,m),A[R++]=V.x,A[R++]=V.y,A[R++]=V.z;A[R++]=S.x,A[R++]=S.y,A[R++]=S.z}i&&(G[Q--]=W.z,G[Q--]=W.y,G[Q--]=W.x,G[b++]=S.x,G[b++]=S.y,G[b++]=S.z)}W=C(-(P=r.CesiumMath.PI_OVER_TWO),s,O,v,c,z,f,d,_,W);var H={};return e&&(A[R++]=W.x,A[R++]=W.y,A[R++]=W.z,H.positions=A,H.numPts=p),i&&(G[Q--]=W.z,G[Q--]=W.y,G[Q--]=W.x,H.outerPositions=G),H},a.EllipseGeometryLibrary=t}));
//# sourceMappingURL=EllipseGeometryLibrary-f2c7f576.js.map
